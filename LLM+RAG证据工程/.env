# LLM+RAG证据工程 Configuration
# 复制此文件为.env并填写实际值

# ==================== PubMed API ====================
# NCBI E-utilities API Key (可选，但强烈推荐)
# 申请地址：https://www.ncbi.nlm.nih.gov/account/settings/
NCBI_API_KEY=226225b9729a3b42b7d0249205eba8211c08

# PubMed API延迟（秒）
# 无API key: 建议0.34s (3次/秒)
# 有API key: 可降至0.1s (10次/秒)
NCBI_DELAY=0.1

# PubMed API超时（秒）
PUBMED_TIMEOUT=30

# PubMed批量拉取大小（减少SSL/EOF错误）
PUBMED_EFETCH_CHUNK=20

# ==================== Ollama LLM ====================
# Ollama服务器地址
OLLAMA_HOST=http://192.168.1.11:11434

# Embedding模型
OLLAMA_EMBED_MODEL=nomic-embed-text

# LLM模型
OLLAMA_LLM_MODEL=qwen2.5:7b-instruct

# Ollama超时（秒，LLM调用通常较慢）
OLLAMA_TIMEOUT=600

# Embedding批处理大小
EMBED_BATCH_SIZE=16

# BM25后最多重排序的文档数
MAX_RERANK_DOCS=60

# Ollama输出格式（json或schema）
OLLAMA_CHAT_FORMAT=json
USE_CHAT_SCHEMA=1

# ==================== ClinicalTrials.gov ====================
# CT.gov API延迟（秒）
CTGOV_DELAY=0.35

# CT.gov API超时（秒）
CTGOV_TIMEOUT=30

# ==================== 重试策略 ====================
# 最大重试次数
MAX_RETRIES=8

# 重试延迟（秒，指数退避）
RETRY_SLEEP=3

# 默认HTTP超时（秒）
REQUEST_TIMEOUT=30

# ==================== 功能开关 ====================
# 禁用Embedding（调试用）
DISABLE_EMBED=0

# 禁用LLM（调试用，使用rule-based提取）
DISABLE_LLM=0

# 跨药物污染过滤
CROSS_DRUG_FILTER=1

# 严格PMID格式检查
PMID_STRICT=1

# 强制重建缓存
FORCE_REBUILD=0

# 刷新空缓存文件
REFRESH_EMPTY_CACHE=1

# ==================== Step7评分策略 ====================
# 主题匹配率最小阈值
TOPIC_MIN=0.30

# 最小唯一PMID数
MIN_UNIQUE_PMIDS=2

# 安全黑名单硬拒绝
SAFETY_HARD_NOGO=0

# ==================== 日志配置 ====================
# 日志级别（DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL=INFO

# 日志文件名
LOG_FILE=dr_pipeline.log

# 日志目录
LOG_DIR=.
