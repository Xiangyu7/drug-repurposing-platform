<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drug Repurposing - é¡¹ç›®å…¨è§ˆ</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, "PingFang SC", "Helvetica Neue", sans-serif; background: #f5f5f7; color: #1d1d1f; line-height: 1.6; padding: 16px; padding-bottom: 80px; }
h1 { font-size: 24px; text-align: center; padding: 20px 0 8px; }
.subtitle { text-align: center; color: #86868b; font-size: 14px; margin-bottom: 24px; }
h2 { font-size: 18px; color: #fff; background: linear-gradient(135deg, #0071e3, #40a0ff); padding: 12px 16px; border-radius: 12px 12px 0 0; margin-top: 24px; }
h2.dir-a { background: linear-gradient(135deg, #e84393, #fd79a8); }
h2.dir-b { background: linear-gradient(135deg, #00b894, #55efc4); color: #1d1d1f; }
h3 { font-size: 15px; color: #0071e3; margin: 16px 0 8px; padding-left: 4px; border-left: 3px solid #0071e3; padding-left: 10px; }
.card { background: #fff; border-radius: 0 0 12px 12px; padding: 16px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
.card-full { background: #fff; border-radius: 12px; padding: 16px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
.step { margin-bottom: 14px; padding: 12px; background: #f9f9fb; border-radius: 10px; border-left: 4px solid #0071e3; }
.step-num { display: inline-block; background: #0071e3; color: #fff; border-radius: 50%; width: 24px; height: 24px; text-align: center; line-height: 24px; font-size: 12px; font-weight: 700; margin-right: 6px; }
.step-title { font-weight: 600; font-size: 14px; display: inline; }
.step-desc { font-size: 13px; color: #424245; margin-top: 6px; }
.io { font-size: 12px; color: #86868b; margin-top: 4px; }
.io b { color: #1d1d1f; }
.tag { display: inline-block; font-size: 11px; padding: 2px 8px; border-radius: 10px; margin-right: 4px; margin-top: 4px; }
.tag-in { background: #e8f5e9; color: #2e7d32; }
.tag-out { background: #fff3e0; color: #e65100; }
.tag-api { background: #e3f2fd; color: #1565c0; }
.tag-r { background: #fce4ec; color: #c62828; }
.tag-py { background: #e8eaf6; color: #283593; }
.tag-llm { background: #f3e5f5; color: #6a1b9a; }
.tag-file { background: #e0f2f1; color: #00695c; font-family: "SF Mono", monospace; font-size: 10px; }
.flow { background: #1d1d1f; color: #fff; border-radius: 12px; padding: 16px; margin: 16px 0; font-family: "SF Mono", "Menlo", monospace; font-size: 11px; line-height: 1.8; overflow-x: auto; white-space: pre; }
.flow-light { background: #f0f0f5; color: #1d1d1f; border-radius: 12px; padding: 16px; margin: 16px 0; font-family: "SF Mono", "Menlo", monospace; font-size: 11px; line-height: 1.7; overflow-x: auto; white-space: pre; }
.highlight { background: #fffde7; border-left: 4px solid #fdd835; padding: 10px 12px; border-radius: 0 8px 8px 0; margin: 12px 0; font-size: 13px; }
.highlight-pink { background: #fce4ec; border-left: 4px solid #e84393; padding: 10px 12px; border-radius: 0 8px 8px 0; margin: 12px 0; font-size: 13px; }
.highlight-green { background: #e8f5e9; border-left: 4px solid #00b894; padding: 10px 12px; border-radius: 0 8px 8px 0; margin: 12px 0; font-size: 13px; }
.section-intro { font-size: 13px; color: #424245; margin-bottom: 12px; }
.divider { height: 1px; background: #e5e5ea; margin: 20px 0; }
.module-label { display: inline-block; font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 12px; margin-bottom: 8px; }
.ml-1 { background: #0071e3; color: #fff; }
.ml-2 { background: #34c759; color: #fff; }
.ml-3 { background: #ff9500; color: #fff; }
.ml-4 { background: #af52de; color: #fff; }
.ml-a { background: #e84393; color: #fff; }
.ml-b { background: #00b894; color: #fff; }
table { width: 100%; border-collapse: collapse; font-size: 12px; margin: 8px 0; }
th { background: #f5f5f7; padding: 8px 6px; text-align: left; font-weight: 600; }
td { padding: 8px 6px; border-bottom: 1px solid #e5e5ea; }
.toc { background: #fff; border-radius: 12px; padding: 16px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
.toc a { color: #0071e3; text-decoration: none; display: block; padding: 6px 0; font-size: 14px; border-bottom: 1px solid #f5f5f7; }
.toc a:last-child { border-bottom: none; }
.toc .indent { padding-left: 20px; font-size: 13px; color: #86868b; }
.compare-box { display: flex; gap: 8px; margin: 12px 0; }
.compare-col { flex: 1; padding: 12px; border-radius: 10px; font-size: 12px; }
.compare-a { background: #fce4ec; border: 1px solid #f8bbd0; }
.compare-b { background: #e8f5e9; border: 1px solid #c8e6c9; }
.compare-col b { display: block; margin-bottom: 6px; font-size: 13px; }
.file-chain { background: #f5f5f7; border-radius: 10px; padding: 12px; margin: 10px 0; font-size: 12px; }
.file-chain .arrow { color: #0071e3; font-weight: 700; margin: 0 4px; }
</style>
</head>
<body>

<h1>Drug Repurposing Platform</h1>
<p class="subtitle">è¯ç‰©é‡å®šä½å¹³å° &middot; é¡¹ç›®å…¨è§ˆæ‰‹å†Œ<br>æ”¯æŒå¤šç–¾ç—… (28 ç§) &middot; åŒç­¾åæº (dsmeta / ARCHS4) &middot; æ›´æ–°äº 2026-02-28</p>

<!-- ç›®å½• -->
<div class="toc">
  <b style="font-size:15px;">ç›®å½•</b>
  <a href="#overview">0. æ•´ä½“æ¶æ„ &amp; å…¨å±€æ•°æ®æµ</a>
  <a href="#mod1">1a. dsmeta_signature_pipeline &mdash; ç–¾ç—…åŸºå› ç­¾å (GEO meta åˆ†æ)</a>
  <a href="#mod1b">1b. archs4_signature_pipeline &mdash; ç–¾ç—…åŸºå› ç­¾å (ARCHS4 H5)</a>
  <a href="#sig-gate">1c. ç­¾åè´¨é‡é—¨æ§ &mdash; åˆ†å±‚è´¨é‡å†³ç­–</a>
  <a href="#mod2">2. SigReverse &mdash; ç­¾ååè½¬è¯ç‰©å‘ç°</a>
  <a href="#mod3">3. kg_explain &mdash; çŸ¥è¯†å›¾è°±è§£é‡Š</a>
  <a href="#bridge" class="indent">&nbsp;&nbsp;3.5 Bridge æ¡¥æ¥æ–‡ä»¶ç”Ÿæˆ (å…³é”®è¡”æ¥)</a>
  <a href="#mod4">4. LLM+RAG è¯æ®å·¥ç¨‹ &mdash; æ–‡çŒ®è¯æ®</a>
  <a href="#dir-ab">5. Direction A vs B &mdash; ä¸¤æ¡ç ”ç©¶è·¯çº¿è¯¦è§£</a>
  <a href="#postrun">6. è·‘å®Œä¸€è½®åæ•°æ®æ£€æŸ¥</a>
  <a href="#ops">7. è¿ç»´å·¥å…·é“¾ (ops)</a>
  <a href="#dataflow">8. å®Œæ•´æ•°æ®æµ &amp; æ–‡ä»¶æ¸…å•</a>
  <a href="#summary">9. é€ŸæŸ¥æ€»ç»“è¡¨</a>
</div>

<!-- ==================== æ•´ä½“æ¶æ„ ==================== -->
<div id="overview"></div>
<h2>0. æ•´ä½“æ¶æ„</h2>
<div class="card">
  <p class="section-intro">æ•´ä¸ªå¹³å°ç”± <b>5 ä¸ªå­é¡¹ç›®</b>ä¸²è”ï¼Œä»åŸºå› è¡¨è¾¾æ•°æ®å‡ºå‘ï¼Œæœ€ç»ˆäº§å‡ºå¸¦æ–‡çŒ®è¯æ®çš„è¯ç‰©å€™é€‰æ¸…å•ã€‚<b>ç­¾åæ„å»ºæœ‰ä¸¤ä¸ªæ¥æº</b>ï¼ˆdsmeta / ARCHS4ï¼‰ï¼Œç”± <code>SIG_PRIORITY</code> æ§åˆ¶ä¼˜å…ˆçº§å’Œå›é€€ã€‚kg_explain äº§å‡º<b>ä¸¤ä¸ª bridge æ–‡ä»¶</b>ï¼Œåˆ†è£‚æˆä¸¤æ¡å¹¶è¡Œç ”ç©¶è·¯çº¿ã€‚</p>

<div class="flow">      GEO æ•°æ®é›† (GSE)              ARCHS4 H5 (å…¨å¹³å°)
            â”‚                              â”‚
            â–¼                              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  1a. dsmeta        â”‚     â”‚  1b. archs4_signature  â”‚  Python
  â”‚  R + Python        â”‚     â”‚  GEOæ ·æœ¬æœç´¢ â†’ DESeq2  â”‚
  â”‚  å¤šGSE DE â†’ meta   â”‚     â”‚  â†’ metaåˆ†æ â†’ ç­¾å     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ SIG_PRIORITY é€‰æ‹© (dsmeta-first / archs4-first)
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ç­¾åè´¨é‡é—¨æ§      â”‚ min(up,down)â‰¥10 &amp; totalâ‰¥30
            â”‚  åˆ†å±‚: &lt;30 è·³è¿‡   â”‚ 30-80 æ”¶ç´§ / â‰¥100 å…¨é‡
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ sigreverse_input.json
                      â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  2. SigReverse     â”‚  Python
               â”‚                    â”‚  LINCS L1000 åæŸ¥
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ drug_reversal_rank.csv
                         â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  3. kg_explain     â”‚  Python
               â”‚  Drugâ†’Targetâ†’      â”‚  çŸ¥è¯†å›¾è°± 10æ­¥ + V5æ’å
               â”‚  Pathwayâ†’Disease   â”‚
               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                    â”‚          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                               â–¼
 bridge_repurpose_cross.csv    bridge_origin_reassess.csv
   (å…¨ç–¾ç—…æœ€ä¼˜è¯ç‰©)               (åŸç–¾ç—…æ–¹å‘è¯ç‰©)
          â”‚                               â”‚
          â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Direction A     â”‚          â”‚  Direction B     â”‚
â”‚  è·¨ç–¾ç—…è¿ç§»       â”‚          â”‚  åŸç–¾ç—…é‡è¯„ä¼°     â”‚
â”‚  LLM+RAG Step6-9â”‚          â”‚  LLM+RAG Step6-9â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                             â”‚
         â–¼                             â–¼
  è·¨ç–¾ç—…å€™é€‰æ¸…å•               åŸç–¾ç—…å€™é€‰æ¸…å•
  + éªŒè¯æ–¹æ¡ˆ                   + éªŒè¯æ–¹æ¡ˆ</div>

  <div class="highlight">
    <b>ä¸¤ç§è¯ç‰©æ¥æº (kg_explain çš„è¾“å…¥æ¨¡å¼)ï¼š</b><br>
    <b>Mode A (CT.gov)</b>: ä»åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–çš„å¤±è´¥ä¸´åºŠè¯•éªŒå‡ºå‘<br>
    <b>Mode B (Signature)</b>: ä»ç–¾ç—…åŸºå› ç­¾åå‡ºå‘ï¼ŒåæŸ¥ä½œç”¨äºç­¾ååŸºå› çš„è¯ç‰©<br><br>
    <b>ä¸¤æ¡ç ”ç©¶è·¯çº¿ (LLM+RAG çš„è¾“å‡ºæ–¹å‘)ï¼š</b><br>
    <b>Direction A (è·¨ç–¾ç—…)</b>: è¯ç‰©åœ¨<b>ä»»ä½•</b>ç–¾ç—…ä¸­å¾—åˆ†æœ€é«˜ â†’ èƒ½å¦è¿ç§»åˆ°ç›®æ ‡ç–¾ç—…ï¼Ÿ<br>
    <b>Direction B (åŸç–¾ç—…)</b>: è¯ç‰©åœ¨<b>ç›®æ ‡ç–¾ç—…</b>æœ¬èº«çš„æœºåˆ¶å¾—åˆ† â†’ æ˜¯å¦å€¼å¾—é‡æ–°è¯„ä¼°ï¼Ÿ
  </div>
</div>

<!-- ==================== æ¨¡å— 1a: dsmeta ==================== -->
<div id="mod1"></div>
<h2>1a. dsmeta_signature_pipeline</h2>
<div class="card">
  <span class="module-label ml-1">ç–¾ç—…åŸºå› ç­¾åæ„å»º</span>
  <p class="section-intro">ä» GEO å…¬å…±æ•°æ®åº“ä¸‹è½½å¤šç»„ç–¾ç—…åŸºå› è¡¨è¾¾æ•°æ®ï¼Œåšå·®å¼‚è¡¨è¾¾åˆ†æ + è·¨ç ”ç©¶ meta åˆ†æï¼Œè¾“å‡ºä¸Šè°ƒ/ä¸‹è°ƒå„ 300 ä¸ªåŸºå› çš„ç–¾ç—…ç­¾åã€‚</p>

  <div class="step">
    <span class="step-num">1</span><span class="step-title">fetch_geo &mdash; ä¸‹è½½ GEO æ•°æ®</span>
    <span class="tag tag-r">R</span>
    <p class="step-desc">æ ¹æ®é…ç½®çš„ GSE ID åˆ—è¡¨ï¼ˆå¦‚ GSE28829, GSE43292ï¼‰ï¼Œä» NCBI GEO ä¸‹è½½è¡¨è¾¾çŸ©é˜µå’Œæ ·æœ¬ä¿¡æ¯ã€‚è‡ªåŠ¨é€‰æ‹©æœ€å¤§å¹³å°ï¼Œæ”¯æŒæœ¬åœ°ç¼“å­˜ã€‚</p>
    <p class="io"><span class="tag tag-in">IN</span> GSE ID åˆ—è¡¨ (é…ç½®æ–‡ä»¶) <span class="tag tag-out">OUT</span> expr.tsv + pheno.tsv (æ¯ä¸ª GSE)</p>
  </div>

  <div class="step">
    <span class="step-num">2</span><span class="step-title">de_limma &mdash; å·®å¼‚è¡¨è¾¾åˆ†æ</span>
    <span class="tag tag-r">R</span>
    <p class="step-desc">å¯¹æ¯ä¸ª GSE åš limma å·®å¼‚è¡¨è¾¾ã€‚æ­£åˆ™åŒ¹é… case/control æ ·æœ¬ï¼ŒPCA å¼‚å¸¸å€¼å‰”é™¤ï¼Œè¾“å‡º logFC / t-stat / p-valueã€‚</p>
    <p class="io"><span class="tag tag-in">IN</span> expr.tsv + pheno.tsv <span class="tag tag-out">OUT</span> de.tsv (æ¯ä¸ª GSE)</p>
  </div>

  <div class="step">
    <span class="step-num">3</span><span class="step-title">probe_to_gene &mdash; æ¢é’ˆ/Ensembl æ˜ å°„åˆ°åŸºå›  (å…³é”®!)</span>
    <span class="tag tag-py">Python</span> <span class="tag tag-api">Ensembl REST API</span>
    <p class="step-desc">ä¸åŒèŠ¯ç‰‡å¹³å°ç”¨ä¸åŒæ¢é’ˆ IDï¼Œå¿…é¡»ç»Ÿä¸€æ˜ å°„åˆ° HGNC åŸºå› ç¬¦å·ã€‚å¦åˆ™è·¨å¹³å°é‡å ç‡ 0%ï¼Œæ˜ å°„å â†’ 74.6%ã€‚<br><b>ğŸ†• 2026-02-28</b>ï¼šæ–°å¢ Ensembl ID (ENSG*) è‡ªåŠ¨è¯†åˆ«å’Œè½¬æ¢ã€‚é€šè¿‡ Ensembl REST API æ‰¹é‡ POST (/lookup/id, 500 ID/æ‰¹)ï¼Œè½¬æ¢ä¸ºåŸºå› ç¬¦å·ã€‚è¡¨è¾¾çŸ©é˜µæŒ‰æ–¹å·®ä¿ç•™æœ€ä¼˜æ¢é’ˆï¼ŒDE ç»“æœæŒ‰ |t| ä¿ç•™æœ€ä¼˜ã€‚ä¹‹å‰ Ensembl ID æ•°æ®é›†ä¼šè¢«ç›´æ¥è·³è¿‡ã€‚</p>
    <p class="io"><span class="tag tag-in">IN</span> de.tsv (æ¢é’ˆ/Ensembl ID) <span class="tag tag-out">OUT</span> de.tsv (åŸºå› ç¬¦å·)</p>
  </div>

  <div class="step">
    <span class="step-num">4</span><span class="step-title">meta_effects &mdash; è·¨ç ”ç©¶ Meta åˆ†æ</span>
    <span class="tag tag-r">R</span>
    <p class="step-desc">ç”¨ metafor éšæœºæ•ˆåº”æ¨¡å‹åˆå¹¶å¤šä¸ª GSE çš„å·®å¼‚è¡¨è¾¾ç»“æœã€‚è¾“å‡º meta logFCã€z å€¼ã€FDRã€å¼‚è´¨æ€§ I&sup2;ã€æ–¹å‘ä¸€è‡´æ€§ï¼ˆ&ge;70%ï¼‰ã€‚</p>
    <p class="io"><span class="tag tag-in">IN</span> æ‰€æœ‰ GSE çš„ de.tsv <span class="tag tag-out">OUT</span> gene_meta.tsv</p>
  </div>

  <div class="step">
    <span class="step-num">5</span><span class="step-title">rank_aggregate &mdash; æ’åèšåˆ</span>
    <span class="tag tag-py">Python</span> <span class="tag tag-r">R</span>
    <p class="step-desc">ç”¨ RobustRankAggreg (RRA) åšåŸºäºæ’åçš„èšåˆï¼Œä¸ meta åˆ†æäº’è¡¥ã€‚é›†æˆå¾—åˆ† = 70% meta + 30% RRAã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> gene_meta_ensemble.tsv</p>
  </div>

  <div class="step">
    <span class="step-num">6</span><span class="step-title">fetch_genesets &mdash; ä¸‹è½½é€šè·¯åŸºå› é›†</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">ä» Reactome / WikiPathways ä¸‹è½½ .gmt é€šè·¯åŸºå› é›†æ–‡ä»¶ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">7</span><span class="step-title">gsea_fgsea &mdash; åŸºå› é›†å¯Œé›†åˆ†æ</span>
    <span class="tag tag-r">R</span>
    <p class="step-desc">å¯¹æ¯ä¸ª GSE ç”¨ fgsea åšé€šè·¯å¯Œé›†åˆ†æ (10,000 æ¬¡ç½®æ¢)ï¼Œå¾—åˆ°å„é€šè·¯çš„ NES å¯Œé›†åˆ†æ•°ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">8</span><span class="step-title">pathway_meta &mdash; é€šè·¯å±‚ Meta åˆ†æ</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">ç”¨å¸¦ç¬¦å· Stouffer Z æ–¹æ³•åˆå¹¶å„ GSE çš„é€šè·¯å¯Œé›†ç»“æœã€‚<br><b>ğŸ†• 2026-02-28</b>ï¼šGSEA æ–‡ä»¶ç¼ºå¤±æ—¶ä¼˜é›…è·³è¿‡ï¼ˆä¸å´©æºƒï¼‰ï¼Œç–¾ç—…åŸºå› ç­¾åä¸å—å½±å“ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">9</span><span class="step-title">make_signature_json &mdash; ç”Ÿæˆç–¾ç—…ç­¾å</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">å– top 300 ä¸Šè°ƒ + top 300 ä¸‹è°ƒåŸºå› ï¼Œç”Ÿæˆ JSON ç­¾åæ–‡ä»¶ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> sigreverse_input.json + up/down_genes.txt</p>
  </div>

  <div class="step">
    <span class="step-num">10</span><span class="step-title">make_report &mdash; QC æŠ¥å‘Š</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">ç”Ÿæˆè‡ªåŒ…å« HTML æŠ¥å‘Šï¼šåŸºå› ç»Ÿè®¡ã€FDR åˆ†å¸ƒã€Top é€šè·¯ç­‰ã€‚</p>
  </div>

  <h3>æœ¬æ¨¡å—æ•°æ®æµ</h3>
<div class="flow-light">GSE28829  GSE43292  ... (GEO æ•°æ®é›†)
    â”‚          â”‚
    â–¼          â–¼
 expr.tsv   expr.tsv      â† Step 1: ä¸‹è½½
 pheno.tsv  pheno.tsv
    â”‚          â”‚
    â–¼          â–¼
  de.tsv     de.tsv        â† Step 2: limma å·®å¼‚è¡¨è¾¾
 (probes)   (probes)
    â”‚          â”‚
    â–¼          â–¼
  de.tsv     de.tsv        â† Step 3: æ¢é’ˆâ†’åŸºå› ç¬¦å·
 (genes)    (genes)
    â”‚          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â–¼
   gene_meta.tsv           â† Step 4: meta åˆ†æ
         â”‚
         â–¼
 gene_meta_ensemble.tsv    â† Step 5: + RRA æ’å
         â”‚
         â–¼
 sigreverse_input.json     â† Step 9: 300 up + 300 down
 (äº¤ç»™ SigReverse)</div>
</div>

<!-- ==================== æ¨¡å— 1b: ARCHS4 ==================== -->
<div id="mod1b"></div>
<h2>1b. archs4_signature_pipeline</h2>
<div class="card">
  <span class="module-label ml-1">ç–¾ç—…åŸºå› ç­¾åæ„å»º (ARCHS4)</span>
  <p class="section-intro">ä» ARCHS4 å…¨å¹³å° H5 æ–‡ä»¶ä¸­æœç´¢ç–¾ç—…ç›¸å…³ GEO æ ·æœ¬ï¼Œåšå·®å¼‚è¡¨è¾¾ + è·¨ç³»åˆ— meta åˆ†æï¼Œè¾“å‡ºç–¾ç—…åŸºå› ç­¾åã€‚ä¸éœ€è¦é¢„å®šä¹‰ GSE åˆ—è¡¨ï¼Œé€‚åˆ dsmeta æ— æ³•è¦†ç›–çš„ç½•è§ç–¾ç—…ã€‚</p>

  <div class="step">
    <span class="step-num">1</span><span class="step-title">search_series &mdash; å…³é”®è¯æœç´¢ GEO ç³»åˆ—</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">åœ¨ ARCHS4 H5 æ–‡ä»¶çš„æ ·æœ¬å…ƒæ•°æ®ä¸­æœç´¢ç–¾ç—…å…³é”®è¯ï¼ˆå¦‚ "abdominal aortic aneurysm", "AAA"ï¼‰ï¼Œè‡ªåŠ¨åˆ†é… case/control æ ‡ç­¾ï¼ŒæŒ‰ GEO series åˆ†ç»„ã€‚</p>
    <p class="io"><span class="tag tag-in">IN</span> human_gene_v2.4.h5 + é…ç½® YAML <span class="tag tag-out">OUT</span> series_candidates.json</p>
  </div>

  <div class="step">
    <span class="step-num">2</span><span class="step-title">archs4_select &mdash; æ ·æœ¬é€‰æ‹© &amp; è¡¨è¾¾æå–</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">ä» H5 æ–‡ä»¶ä¸­ç›´æ¥æå–é€‰ä¸­æ ·æœ¬çš„åŸºå› è¡¨è¾¾çŸ©é˜µã€‚æ”¯æŒ ARCHS4 v2.4 (<code>meta/genes/symbol</code>) å’Œæ—§ç‰ˆ (<code>meta/genes/gene_symbol</code>) ä¸¤ç§è·¯å¾„ã€‚æ¯ç»„ min 3 / max 50 æ ·æœ¬ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> expr_matrix.tsv (æ¯ä¸ª series)</p>
  </div>

  <div class="step">
    <span class="step-num">3</span><span class="step-title">de_analysis &mdash; å·®å¼‚è¡¨è¾¾ (DESeq2)</span>
    <span class="tag tag-r">R</span>
    <p class="step-desc">å¯¹æ¯ä¸ª series åš DESeq2 å·®å¼‚è¡¨è¾¾åˆ†æï¼ˆARCHS4 æ˜¯ count æ•°æ®ï¼Œé€‚åˆ DESeq2 è€Œé limmaï¼‰ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> de_results.tsv (æ¯ä¸ª series)</p>
  </div>

  <div class="step">
    <span class="step-num">4</span><span class="step-title">meta_analysis &mdash; è·¨ç³»åˆ— Meta åˆ†æ</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">ç”¨ DerSimonian-Laird (DL) éšæœºæ•ˆåº”æ¨¡å‹åˆå¹¶å¤šä¸ª series çš„å·®å¼‚è¡¨è¾¾ç»“æœï¼Œè¦æ±‚æ–¹å‘ä¸€è‡´æ€§ &ge; 80%ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> meta_results.tsv</p>
  </div>

  <div class="step">
    <span class="step-num">5</span><span class="step-title">make_signature &mdash; ç”Ÿæˆç­¾å JSON</span>
    <span class="tag tag-py">Python</span>
    <p class="step-desc">å– top N ä¸Šè°ƒ + top N ä¸‹è°ƒåŸºå› ï¼ˆé»˜è®¤ 300ï¼‰ï¼ŒæŒ‰ meta_z &times; OT_score åŠ æƒæ’åºï¼Œç”Ÿæˆä¸ dsmeta æ ¼å¼å…¼å®¹çš„ç­¾å JSONã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> sigreverse_input.json + disease_signature_meta.json</p>
  </div>

  <h3>dsmeta vs ARCHS4 å¯¹æ¯”</h3>
  <div class="compare-box">
    <div class="compare-col compare-a">
      <b>dsmeta (GEO meta åˆ†æ)</b>
      éœ€è¦é¢„å®šä¹‰ GSE åˆ—è¡¨<br>
      èŠ¯ç‰‡+RNA-seq æ··åˆ<br>
      limma å·®å¼‚è¡¨è¾¾<br>
      é€‚åˆï¼šæœ‰å·²çŸ¥ GSE çš„å¸¸è§ç—…<br>
      ç­¾åå¤§ï¼š300 up + 300 down
    </div>
    <div class="compare-col compare-b">
      <b>ARCHS4 (H5 å…¨å¹³å°æœç´¢)</b>
      å…³é”®è¯è‡ªåŠ¨æœç´¢ï¼Œæ— éœ€ GSE åˆ—è¡¨<br>
      çº¯ RNA-seq (count data)<br>
      DESeq2 å·®å¼‚è¡¨è¾¾<br>
      é€‚åˆï¼šç½•è§ç—…ã€æ–°ç–¾ç—…æ¢ç´¢<br>
      ç­¾åå¯èƒ½è¾ƒå° (å–å†³äºæœåˆ°çš„æ ·æœ¬æ•°)
    </div>
  </div>

  <div class="highlight">
    <b>ç­¾åæºé€‰æ‹© (<code>SIG_PRIORITY</code> ç¯å¢ƒå˜é‡)ï¼š</b><br>
    <code>SIG_PRIORITY=dsmeta</code> (é»˜è®¤) &mdash; ä¼˜å…ˆ dsmetaï¼Œå¤±è´¥å›é€€ ARCHS4<br>
    <code>SIG_PRIORITY=archs4</code> &mdash; ä¼˜å…ˆ ARCHS4ï¼Œå¤±è´¥å›é€€ dsmeta<br>
    runner.sh ä¼šè‡ªåŠ¨å°è¯•ä¸¤ä¸ªæºï¼ŒæˆåŠŸåæ‰“å°å†³ç­– bannerã€‚
  </div>
</div>

<!-- ==================== ç­¾åè´¨é‡é—¨æ§ ==================== -->
<div id="sig-gate"></div>
<h2>1c. ç­¾åè´¨é‡é—¨æ§</h2>
<div class="card">
  <span class="module-label ml-a">Cross è·¯çº¿å¯é æ€§ä¿éšœ</span>
  <p class="section-intro">ARCHS4 ç­¾åå¯èƒ½è¾ƒå°ï¼ˆå¦‚ 23 up + 30 down = 53 åŸºå› ï¼‰ï¼Œå°ç­¾åä¼šå¯¼è‡´ SigReverse å™ªå£°å¤§ã€KG è¯ç‰©çˆ†ç‚¸ã€‚åˆ†å±‚è´¨é‡é—¨æ§åœ¨ä¸¤ä¸ªä½ç½®ç”Ÿæ•ˆï¼šrunner.shï¼ˆå…¥å£é—¨ï¼‰å’Œ cli.pyï¼ˆKG å†…éƒ¨é—¨ï¼‰ã€‚</p>

  <h3>åŒé‡æ£€æŸ¥æ¡ä»¶</h3>
  <table>
    <tr><th>æ£€æŸ¥é¡¹</th><th>æ¡ä»¶</th><th>å«ä¹‰</th></tr>
    <tr><td><b>æ€»é‡æ£€æŸ¥</b></td><td><code>up + down &ge; 30</code></td><td>åŸºå› æ€»æ•°è¶³å¤Ÿè¦†ç›–é€šè·¯</td></tr>
    <tr><td><b>å¹³è¡¡æ£€æŸ¥</b></td><td><code>min(up, down) &ge; 10</code></td><td>ä¸Šä¸‹è°ƒæ–¹å‘å‡æœ‰è¶³å¤Ÿä¿¡å·</td></tr>
  </table>

  <h3>åˆ†å±‚å†³ç­–</h3>
  <table>
    <tr><th>å±‚çº§</th><th>æ¡ä»¶</th><th>åŠ¨ä½œ</th><th>KG è¯ç‰©ä¸Šé™</th></tr>
    <tr style="background:#fce4ec;"><td><b>Tier 0</b></td><td>total &lt; 30 æˆ– min(up,down) &lt; 10</td><td>runner.sh ç›´æ¥è·³è¿‡ Cross è·¯çº¿</td><td>N/A</td></tr>
    <tr style="background:#fff3e0;"><td><b>Tier 1</b></td><td>30 &le; total &lt; 100</td><td>Cross å¯ç”¨ï¼Œè‡ªåŠ¨æ”¶ç´§</td><td>cap 80</td></tr>
    <tr style="background:#e8f5e9;"><td><b>Tier 2</b></td><td>total &ge; 100</td><td>Cross æ­£å¼å¯ç”¨</td><td>cap 200 (é»˜è®¤)</td></tr>
  </table>

  <div class="highlight-pink">
    <b>ä¸ºä»€ä¹ˆéœ€è¦è¯ç‰©ä¸Šé™ (<code>--max-drugs</code>)?</b><br>
    å°ç­¾å (å¦‚ 15 åŸºå› ) ç» SigReverse å¯äº§ç”Ÿ 7000+ å€™é€‰è¯ç‰© â†’ KG éœ€è®¡ç®— 400K+ DTPD è·¯å¾„ â†’ 1.6GB jsonl â†’ å†…å­˜çˆ†ç‚¸ + 30 åˆ†é’Ÿ+ã€‚<br>
    è¯ç‰©ä¸Šé™åœ¨ KG å…¥å£æˆªæ–­ <code>drug_chembl_map.csv</code>ï¼ŒæŒ‰ <code>gene_weight</code> æ’åºä¿ç•™ top Nï¼Œä»æºå¤´æ§åˆ¶ä¸‹æ¸¸è§„æ¨¡ã€‚<br>
    ç¯å¢ƒå˜é‡ï¼š<code>KG_MAX_DRUGS_SIGNATURE=200</code> (é»˜è®¤ 200)
  </div>
</div>

<!-- ==================== æ¨¡å— 2: SigReverse ==================== -->
<div id="mod2"></div>
<h2>2. SigReverse</h2>
<div class="card">
  <span class="module-label ml-2">ç­¾ååè½¬è¯ç‰©å‘ç°</span>
  <p class="section-intro">æ ¸å¿ƒå‡è¯´ï¼šå¦‚æœæŸè¯ç‰©èƒ½"åè½¬"ç–¾ç—…çš„åŸºå› è¡¨è¾¾æ¨¡å¼ï¼ˆä¸Šè°ƒå˜ä¸‹è°ƒï¼Œä¸‹è°ƒå˜ä¸Šè°ƒï¼‰ï¼Œé‚£å®ƒå¯èƒ½æœ‰æ²»ç–—æ½œåŠ›ã€‚åŸºäº LINCS L1000 æ•°æ®åº“å®ç° CMap æ–¹æ³•è®ºã€‚</p>

  <div class="step">
    <span class="step-num">1</span><span class="step-title">åŠ è½½ &amp; éªŒè¯ç–¾ç—…ç­¾å</span>
    <p class="step-desc">åŠ è½½ dsmeta äº§å‡ºçš„ JSON ç­¾åï¼ŒéªŒè¯åŸºå› æ•°ï¼ˆæ¨è 150-300 ä¸ª/æ–¹å‘ï¼‰ã€‚</p>
    <p class="io"><span class="tag tag-in">IN</span> sigreverse_input.json</p>
  </div>

  <div class="step">
    <span class="step-num">2</span><span class="step-title">åŸºå› ç¬¦å· â†’ LINCS UUID æ˜ å°„</span>
    <span class="tag tag-api">LDP3 API</span>
    <p class="step-desc">æŠŠåŸºå› ç¬¦å·è½¬ä¸º LINCS æ•°æ®åº“ä¸­çš„å®ä½“ UUIDï¼Œè®°å½•ç¼ºå¤±åŸºå› ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">3</span><span class="step-title">LINCS L1000 å¯Œé›†æŸ¥è¯¢</span>
    <span class="tag tag-api">LDP3 API</span>
    <p class="step-desc">æŸ¥è¯¢ L1000 æ•°æ®åº“ï¼Œè·å– Top 10,000 ä¸ªä¸ç–¾ç—…ç­¾åæœ€ç›¸å…³çš„è¯ç‰©-ç»†èƒç³»-å‰‚é‡-æ—¶é—´ç­¾åï¼Œè¿”å› z-up / z-down åˆ†æ•°ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">4</span><span class="step-title">è·å–ç­¾åå…ƒæ•°æ®</span>
    <span class="tag tag-api">LDP3 API</span>
    <p class="step-desc">ä¸ºæ¯æ¡ç­¾åæ‹‰å–å®éªŒä¸Šä¸‹æ–‡ï¼šè¯ç‰©åã€ç»†èƒç³»ã€å‰‚é‡ã€å¤„ç†æ—¶é—´ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">5</span><span class="step-title">ç­¾åçº§åˆ«æ‰“åˆ† (WTCS-like)</span>
    <p class="step-desc">å¦‚æœ z_up å’Œ z_down åŒå‘ â†’ æœ‰æ•ˆåˆ†æ•°ï¼Œå¦åˆ™ â†’ 0ã€‚åˆ†ç±»ä¸º reverserï¼ˆåè½¬è€…ï¼‰/ mimickerï¼ˆæ¨¡ä»¿è€…ï¼‰/ partial / orthogonalã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">6</span><span class="step-title">è¯ç‰©çº§åˆ«èšåˆ (Robustness)</span>
    <p class="step-desc">åŒä¸€è¯ç‰©çš„å¤šæ¡ç­¾åèšåˆä¸ºä¸€ä¸ªåˆ†æ•°ï¼š<br>
    <b>final = median &times; p_reverser &times; log(1+n)/log(1+8) &times; cl_bonus</b><br>
    è€ƒè™‘ä¸€è‡´æ€§ã€æ ·æœ¬é‡é¥±å’Œã€å¤šç»†èƒç³»å¤šæ ·æ€§ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">7</span><span class="step-title">ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ</span>
    <p class="step-desc">1000 æ¬¡ç½®æ¢æ£€éªŒ â†’ ç»éªŒ p å€¼ â†’ BH FDR æ ¡æ­£ + 2000 æ¬¡ Bootstrap CIã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">8</span><span class="step-title">CMap å››é˜¶æ®µç®¡çº¿</span>
    <p class="step-desc">ç»å…¸ CMapï¼šES â†’ WTCS â†’ NCSï¼ˆç»†èƒç³»å†…æ ‡å‡†åŒ–ï¼‰â†’ Tauï¼ˆ-100 åˆ° +100ï¼‰ã€‚<br>Tau &lt; -90 = å¼ºåè½¬å€™é€‰ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">9</span><span class="step-title">å‰‚é‡-ååº”åˆ†æ</span>
    <p class="step-desc">Spearman ç›¸å…³åˆ†æè¯ç‰©å‰‚é‡ä¾èµ–æ€§ï¼Œè¯„ä¸º excellent / good / marginal / poorã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">10</span><span class="step-title">è¯ç‰©åæ ‡å‡†åŒ–ï¼ˆå¯é€‰ï¼‰</span>
    <span class="tag tag-api">PubChem / UniChem</span>
    <p class="step-desc">LINCS è¯ç‰©å â†’ PubChem CID â†’ InChIKey â†’ ChEMBL/DrugBank äº¤å‰å¼•ç”¨ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">11</span><span class="step-title">QC &amp; æ¯’æ€§æ ‡è®°</span>
    <p class="step-desc">æ£€æµ‹å¯èƒ½çš„éç‰¹å¼‚æ€§æ¯’æ€§ååº”å‡é˜³æ€§ï¼ˆå¤ªå¤šç­¾åä¸€è‡´åè½¬ â†’ å¯èƒ½æ˜¯ç»†èƒåº”æ¿€ï¼‰ã€‚</p>
  </div>

  <div class="step">
    <span class="step-num">12</span><span class="step-title">å¤šæºèåˆæ’åï¼ˆå¯é€‰ï¼‰</span>
    <p class="step-desc">èåˆ SigReverse (50%) + KG æœºåˆ¶ (30%) + FAERS å®‰å…¨æ€§ (10%) + å‰‚é‡å“åº” + æ–‡çŒ®ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> drug_reversal_rank.csv + fusion_ranking.csv</p>
  </div>

  <h3>æœ¬æ¨¡å—æ•°æ®æµ</h3>
<div class="flow-light">sigreverse_input.json (300 up + 300 down åŸºå› )
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
 up åŸºå›    down åŸºå› 
    â”‚         â”‚
    â–¼         â–¼
 LINCS UUID  LINCS UUID     â† Step 2: åŸºå› â†’UUID
    â”‚         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â–¼
 Top 10,000 ç­¾å (z-up, z-down)  â† Step 3: LINCS æŸ¥è¯¢
         â”‚
         â–¼
 + å…ƒæ•°æ® (è¯ç‰©, ç»†èƒç³», å‰‚é‡)    â† Step 4
         â”‚
         â–¼
 sig_score per ç­¾å              â† Step 5: WTCS æ‰“åˆ†
         â”‚
         â–¼
 final_reversal_score per è¯ç‰©   â† Step 6: èšåˆ
         â”‚
         â”œâ”€â”€ perm_pvalue + fdr   â† Step 7: æ˜¾è‘—æ€§
         â”œâ”€â”€ tau (-100~+100)     â† Step 8: CMap
         â”œâ”€â”€ dr_quality          â† Step 9: å‰‚é‡ååº”
         â”‚
         â–¼
 drug_reversal_rank.csv          â† æœ€ç»ˆè¾“å‡º
 (äº¤ç»™ kg_explain)</div>
</div>

<!-- ==================== æ¨¡å— 3: kg_explain ==================== -->
<div id="mod3"></div>
<h2>3. kg_explain</h2>
<div class="card">
  <span class="module-label ml-3">çŸ¥è¯†å›¾è°±è§£é‡Šå¼•æ“</span>
  <p class="section-intro">æ„å»º Drug â†’ Target â†’ Pathway â†’ Disease çš„å¤šè·³è·¯å¾„ï¼Œç”¨çŸ¥è¯†å›¾è°±è§£é‡Šè¯ç‰©ä¸ºä»€ä¹ˆå¯èƒ½å¯¹æŸç–¾ç—…æœ‰æ•ˆã€‚æ”¯æŒä¸¤ç§è¾“å…¥æ¨¡å¼ã€‚</p>

  <h3>Mode A: ä» CT.gov å¤±è´¥è¯•éªŒå‡ºå‘</h3>

  <div class="step">
    <span class="step-num">1</span><span class="step-title">è·å– CT.gov å¤±è´¥è¯•éªŒ</span>
    <span class="tag tag-api">CT.gov API</span>
    <p class="step-desc">æŸ¥è¯¢åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–çš„è¢«ç»ˆæ­¢/æ’¤å›/æš‚åœä¸´åºŠè¯•éªŒï¼Œæå–è¯ç‰©åç§°ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> failed_trials_drug_rows.csv</p>
  </div>

  <div class="step">
    <span class="step-num">2</span><span class="step-title">RxNorm æ ‡å‡†åŒ–</span>
    <span class="tag tag-api">RxNorm API</span>
    <p class="step-desc">ç”¨ RxNorm ç»Ÿä¸€è¯ç‰©åç§°æ‹¼å†™å’Œåˆ«åã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> drug_rxnorm_map.csv</p>
  </div>

  <div class="step">
    <span class="step-num">3</span><span class="step-title">æ„å»ºè§„èŒƒå</span>
    <p class="step-desc">åˆå¹¶åˆ«åï¼Œåˆ›å»ºå”¯ä¸€è§„èŒƒè¯ç‰©åã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> drug_canonical.csv</p>
  </div>

  <div class="step">
    <span class="step-num">4</span><span class="step-title">ChEMBL æ˜ å°„</span>
    <span class="tag tag-api">ChEMBL API</span>
    <p class="step-desc">è¯ç‰©å â†’ ChEMBL IDï¼ˆç²¾ç¡® â†’ æ¨¡ç³Š â†’ ç›â†’æ¯ä½“å›é€€ï¼‰ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> drug_chembl_map.csv</p>
  </div>

  <div class="step">
    <span class="step-num">5</span><span class="step-title">è·å–è¯ç‰©é¶ç‚¹</span>
    <span class="tag tag-api">ChEMBL API</span>
    <p class="step-desc">ä» ChEMBL æœºåˆ¶æ•°æ®è·å–æ¯ä¸ªè¯ç‰©çš„è›‹ç™½é¶ç‚¹ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> edge_drug_target.csv</p>
  </div>

  <h3>Mode B: ä»åŸºå› ç­¾åå‡ºå‘</h3>
  <div class="step" style="border-left-color: #34c759;">
    <span class="step-num" style="background:#34c759;">1</span><span class="step-title">åŸºå› ç­¾å â†’ è¯ç‰©åæŸ¥</span>
    <span class="tag tag-api">ChEMBL + MyGene</span>
    <p class="step-desc">å– top 100 ç­¾ååŸºå›  â†’ UniProt â†’ ChEMBL é¶ç‚¹ â†’ åæŸ¥ä½œç”¨äºè¿™äº›é¶ç‚¹çš„è¯ç‰©ï¼ˆPhase II+ï¼‰ã€‚ç›´æ¥äº§å‡º Steps 1-5 çš„ç­‰æ•ˆè¾“å‡ºã€‚</p>
  </div>

  <h3>å…±äº«æ­¥éª¤ (ä¸¤ç§æ¨¡å¼å…±ç”¨)</h3>

  <div class="step">
    <span class="step-num">6</span><span class="step-title">é¶ç‚¹ â†’ Ensembl åŸºå›  ID</span>
    <span class="tag tag-api">ChEMBL + UniProt</span>
    <p class="step-desc">ChEMBL é¶ç‚¹ â†’ UniProt â†’ Ensembl åŸºå›  IDã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> target_xref.csv</p>
  </div>

  <div class="step">
    <span class="step-num">7</span><span class="step-title">é¶ç‚¹ â†’ é€šè·¯ (Reactome)</span>
    <span class="tag tag-api">Reactome API</span>
    <p class="step-desc">æŸ¥è¯¢æ¯ä¸ªè›‹ç™½å‚ä¸çš„ç”Ÿç‰©é€šè·¯ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> edge_target_pathway_all.csv</p>
  </div>

  <div class="step">
    <span class="step-num">8</span><span class="step-title">åŸºå›  â†’ ç–¾ç—… (OpenTargets)</span>
    <span class="tag tag-api">OpenTargets GraphQL</span>
    <p class="step-desc">æŸ¥è¯¢æ¯ä¸ªåŸºå› å…³è”çš„ç–¾ç—…ï¼ˆè¿‡æ»¤ GO_/MP_ éç–¾ç—…æ¡ç›®ï¼‰ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> edge_target_disease_ot.csv</p>
  </div>

  <div class="step">
    <span class="step-num">9</span><span class="step-title">æ„å»ºä¸­é—´è¾¹</span>
    <p class="step-desc">geneâ†’pathway è¾¹ + pathwayâ†’disease è¾¹ + trialâ†’AE è¾¹</p>
  </div>

  <div class="step">
    <span class="step-num">10</span><span class="step-title">V5 é¢å¤–æ•°æ®</span>
    <span class="tag tag-api">FAERS + SIDER + OpenTargets + ChEMBL</span>
    <p class="step-desc">FAERS ä¸è‰¯ååº” + <b>ğŸ†• SIDER è¯ç‰©æ ‡ç­¾å‰¯ä½œç”¨</b>ï¼ˆè¡¥å…… FAERS è‡ªæ„¿æŠ¥å‘Šæ•°æ®ï¼‰+ ç–¾ç—…è¡¨å‹å…³è” + è¯ç‰©å·²çŸ¥é€‚åº”ç—‡</p>
  </div>

  <div class="divider"></div>

  <div class="step" style="border-left-color: #ff9500;">
    <span class="step-num" style="background:#ff9500;">R</span><span class="step-title">V5 æ’åæ‰“åˆ† (2026-02-26 æ›´æ–°)</span>
    <p class="step-desc">ç”Ÿæˆ Drugâ†’Targetâ†’Pathwayâ†’Disease å…¨è·¯å¾„ï¼Œè®¡ç®—ï¼š<br>
    <b>final = mechanism_score &times; e<sup>-(w1&times;safety_penalty - w2&times;trial_penalty)</sup> &times; (1 + w3&times;phenotype_boost)</b><br>
    æƒé‡ï¼šw1=0.3, w2=0.2, w3=0.1</p>
    <table style="margin:8px 0;font-size:0.92em;">
      <tr><th>å­é¡¹</th><th>æ¥æº</th><th>å…¬å¼</th></tr>
      <tr><td><b>mechanism_score</b></td><td>V3 è·¯å¾„èšåˆ (Drugâ†’Targetâ†’Pathwayâ†’Disease)</td><td>base score</td></tr>
      <tr><td><b>safety_penalty</b></td><td>FAERS ä¸è‰¯ååº” + SIDER æ ‡ç­¾å‰¯ä½œç”¨ï¼ŒPRR è¿‡æ»¤</td><td><code>tanh(log1p(PRR)/5 &times; confidence &times; serious_weight)</code></td></tr>
      <tr><td><b>trial_penalty</b></td><td>å¤±è´¥è¯•éªŒï¼Œå¯¹æ•°é¥±å’Œ</td><td><code>0.1 &times; log1p(safety_stops) + 0.05 &times; log1p(eff_stops)</code></td></tr>
      <tr><td><b>phenotype_boost</b></td><td>ç–¾ç—…è¡¨å‹é‡å </td><td><code>avg_pheno_score &times; log1p(n_phenotype)</code></td></tr>
    </table>
    <p class="step-desc">Bootstrap CI (1000x) é‡åŒ–ä¸ç¡®å®šæ€§ã€‚ç»„åˆè¯æŒ‰æˆåˆ†æ•°å½’ä¸€åŒ–ï¼Œé¿å…åˆ†æ•°è†¨èƒ€ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> drug_disease_rank.csv + evidence_pack/*.json (ä»… top-K)</p>
  </div>

  <h3>æœ¬æ¨¡å—æ•°æ®æµ</h3>
<div class="flow-light">Mode A: CT.gov å¤±è´¥è¯•éªŒ        Mode B: åŸºå› ç­¾å
         â”‚                              â”‚
  Step1: CT.gov API              Step1: ç­¾ååŸºå› â†’UniProt
         â”‚                        â†’ChEMBLé¶ç‚¹â†’åæŸ¥è¯ç‰©
  Step2: RxNorm æ ‡å‡†åŒ–                  â”‚
         â”‚                              â”‚
  Step3: è§„èŒƒå                         â”‚
         â”‚                              â”‚
  Step4: ChEMBL æ˜ å°„                    â”‚
         â”‚                              â”‚
  Step5: è·å–é¶ç‚¹                       â”‚
         â”‚                              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
          edge_drug_target.csv (è¯ç‰©-é¶ç‚¹è¾¹)
                    â”‚
                    â–¼
          Step6: ChEMBLâ†’UniProtâ†’Ensembl
                    â”‚
                    â–¼
          target_xref.csv (é¶ç‚¹äº¤å‰å¼•ç”¨)
                    â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
             â–¼             â–¼
     Step7: Reactome   Step8: OpenTargets
     é¶ç‚¹â†’é€šè·¯          åŸºå› â†’ç–¾ç—…
             â”‚             â”‚
             â–¼             â–¼
  edge_target_pathway  edge_target_disease
             â”‚             â”‚
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
          Step9: æ„å»ºä¸­é—´è¾¹
          â”œâ”€â”€ edge_gene_pathway.csv
          â”œâ”€â”€ edge_pathway_disease.csv
          â””â”€â”€ edge_trial_ae.csv
                    â”‚
                    â–¼
          Step10: V5 é¢å¤–æ•°æ®
          â”œâ”€â”€ edge_drug_ae_faers.csv    (FAERS è‡ªæ„¿æŠ¥å‘Š)
          â”œâ”€â”€ sider_side_effects.csv    (SIDER æ ‡ç­¾å‰¯ä½œç”¨)
          â”œâ”€â”€ edge_disease_phenotype.csv (è¡¨å‹)
          â””â”€â”€ drug_known_indications.csv (é€‚åº”ç—‡)
                    â”‚
                    â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  V5 æ’åæ‰“åˆ†                              â”‚
          â”‚  final = mechanism Ã— exp(-å®‰å…¨ç½š-è¯•éªŒç½š)    â”‚
          â”‚         Ã— (1 + è¡¨å‹åŠ æˆ)                   â”‚
          â”‚  å®‰å…¨ç½š: tanh(log1p(PRR)/5 Ã— conf Ã— wt)   â”‚
          â”‚  è¯•éªŒç½š: 0.1Â·log1p(safe) + 0.05Â·log1p(eff)â”‚
          â”‚  è¡¨å‹:   avg_score Ã— log1p(n_pheno)        â”‚
          â”‚  54,000+ è¯ç‰©-ç–¾ç—…å¯¹ + Bootstrap CI         â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â–¼         â–¼
         bridge_repurpose  bridge_origin
         _cross.csv        _reassess.csv
         (â†’Dir A)          (â†’Dir B)</div>
</div>

<!-- ==================== 3.5 Bridge æ¡¥æ¥æ–‡ä»¶ ==================== -->
<div id="bridge"></div>
<h2 style="background: linear-gradient(135deg, #ff9500, #ffbe76);">3.5 Bridge æ¡¥æ¥æ–‡ä»¶ç”Ÿæˆ</h2>
<div class="card">
  <p class="section-intro">kg_explain çš„ V5 æ’åä¼šäº§å‡º <b>54,000+</b> ä¸ªè¯ç‰©-ç–¾ç—…å¯¹ã€‚è¿™äº›ç»“æœéœ€è¦åˆ†è£‚æˆä¸¤ä¸ª bridge æ–‡ä»¶ï¼Œåˆ†åˆ«é€å…¥ LLM+RAG çš„ä¸¤æ¡ç ”ç©¶è·¯çº¿ã€‚<b>è¿™æ˜¯è¿æ¥ kg_explain å’Œ LLM+RAG çš„å…³é”®è¡”æ¥ç‚¹ã€‚</b></p>

  <div class="step" style="border-left-color: #e84393;">
    <span class="step-num" style="background:#e84393;">A</span><span class="step-title">bridge_repurpose_cross.csv</span>
    <p class="step-desc">
      <b>ç”Ÿæˆé€»è¾‘ï¼š</b>å¯¹æ¯ä¸ªè¯ç‰©ï¼Œå–å®ƒåœ¨<b>æ‰€æœ‰ç–¾ç—…</b>ä¸­å¾—åˆ†æœ€é«˜çš„é‚£ä¸ªç–¾ç—…å¯¹ã€‚<br>
      <b>å«ä¹‰ï¼š</b>è¿™ä¸ªè¯ç‰©åœ¨å…¶ä»–ç–¾ç—…ä¸Šæœ‰å¾ˆå¼ºçš„æœºåˆ¶è§£é‡Š â†’ èƒ½å¦"è¿ç§»"åˆ°æˆ‘ä»¬çš„ç›®æ ‡ç–¾ç—…ï¼Ÿ<br>
      <b>ä¸¾ä¾‹ï¼š</b>emricasan åœ¨"æ™ºåŠ›å‘è‚²éšœç¢"ä¸­å¾—åˆ† 11.4 â†’ å®ƒçš„ caspase æŠ‘åˆ¶æœºåˆ¶èƒ½å¦æ²»ç–—åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–ï¼Ÿ<br>
      <b>å…¸å‹è¯ç‰©æ¥æºï¼š</b>JAK æŠ‘åˆ¶å‰‚ï¼ˆè‡ªå…ï¼‰ã€BTK æŠ‘åˆ¶å‰‚ï¼ˆè‚¿ç˜¤ï¼‰ç­‰è·¨é¢†åŸŸè¯ç‰©
    </p>
    <p class="io"><span class="tag tag-file">kg_explain/output/bridge_repurpose_cross.csv</span></p>
  </div>

  <div class="step" style="border-left-color: #00b894;">
    <span class="step-num" style="background:#00b894;">B</span><span class="step-title">bridge_origin_reassess.csv</span>
    <p class="step-desc">
      <b>ç”Ÿæˆé€»è¾‘ï¼š</b>åªçœ‹è¯ç‰©åœ¨<b>ç›®æ ‡ç–¾ç—…ï¼ˆåŠ¨è„‰ç²¥æ ·ç¡¬åŒ–ï¼‰</b>åŠå…¶äºšå‹ä¸­çš„å¾—åˆ†ã€‚ç”¨ MAX èšåˆã€‚<br>
      <b>å«ä¹‰ï¼š</b>è¿™äº›è¯ç‰©ä¹‹å‰åœ¨åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–è¯•éªŒä¸­å¤±è´¥äº†ï¼Œä½†æœºåˆ¶å¾—åˆ†è¿˜ä¸é”™ â†’ å€¼å¾—é‡æ–°è¯„ä¼°ï¼Ÿ<br>
      <b>ä¸¾ä¾‹ï¼š</b>digitoxin åœ¨"å† çŠ¶åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–"ä¸­å¾—åˆ† 1.02 â†’ è¯¥è¯æ˜¯å¦å› é”™è¯¯ç»ˆç‚¹/äººç¾¤è€Œå¤±è´¥ï¼Ÿ<br>
      <b>é¢å¤–åŠŸèƒ½ï¼š</b>æ”¯æŒé€šè¿‡ --inject YAML æ‰‹åŠ¨æ³¨å…¥æ–‡çŒ®ä¸­å‘ç°ä½†ä¸åœ¨ KG ä¸­çš„è¯ç‰©<br>
      <b>é¢å¤–å­—æ®µï¼š</b>ci_lower, ci_upper, confidence_tier, source (kg/literature/kg+literature)
    </p>
    <p class="io"><span class="tag tag-file">kg_explain/output/bridge_origin_reassess.csv</span></p>
  </div>

  <h3>Bridge CSV é¶ç‚¹åˆ— (2026-02-16 æ–°å¢)</h3>
  <div class="highlight">
    <b>ä¸¤ä¸ª bridge æ–‡ä»¶ç°åœ¨éƒ½åŒ…å«é¶ç‚¹å’Œç»“æ„ä¿¡æ¯ï¼š</b><br><br>
    <b>targets</b> â€” äººç±»å¯è¯»é¶ç‚¹æ‘˜è¦ï¼ˆåˆ†å·åˆ†éš”ï¼‰ï¼Œç¤ºä¾‹ï¼š<br>
    <span style="font-family:monospace;font-size:11px;background:#f5f5f7;padding:2px 6px;border-radius:4px;">PCSK9 (CHEMBL2929) [UniProt:Q8NBP7] [PDB+AlphaFold] â€” Subtilisin/kexin type 9 inhibitor</span><br><br>
    <b>target_details</b> â€” JSON æ•°ç»„ï¼Œæ¯ä¸ªé¶ç‚¹åŒ…å«ï¼š
    <table>
      <tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr>
      <tr><td>target_chembl_id</td><td>ChEMBL é¶ç‚¹ ID</td></tr>
      <tr><td>target_name</td><td>é¶ç‚¹åç§°</td></tr>
      <tr><td>mechanism_of_action</td><td>ä½œç”¨æœºåˆ¶</td></tr>
      <tr><td>uniprot</td><td>UniProt ç™»å½•å·</td></tr>
      <tr><td>pdb_ids</td><td>å‰ 5 ä¸ªå®éªŒ PDB ID</td></tr>
      <tr><td>pdb_count</td><td>PDB æ¡ç›®æ€»æ•°</td></tr>
      <tr><td>has_alphafold</td><td>æ˜¯å¦æœ‰ AlphaFold é¢„æµ‹</td></tr>
      <tr><td>structure_source</td><td>ç»“æ„æ¥æºåˆ†ç±»ï¼ˆè§ä¸‹æ–¹ï¼‰</td></tr>
    </table>
    <br>
    <b>structure_source åˆ†ç±»ï¼š</b><br>
    <span style="display:inline-block;background:#e8f5e9;color:#2e7d32;padding:2px 8px;border-radius:8px;font-size:11px;margin:2px;">PDB+AlphaFold</span> æœ‰å®éªŒ PDB + AlphaFold é¢„æµ‹ â†’ å¯ç›´æ¥åšåˆ†å­å¯¹æ¥ï¼Œä¼˜å…ˆé€‰å®éªŒ PDB<br>
    <span style="display:inline-block;background:#e3f2fd;color:#1565c0;padding:2px 8px;border-radius:8px;font-size:11px;margin:2px;">PDB</span> ä»…æœ‰å®éªŒ PDB â†’ å¯ç›´æ¥åšåˆ†å­å¯¹æ¥<br>
    <span style="display:inline-block;background:#fff3e0;color:#e65100;padding:2px 8px;border-radius:8px;font-size:11px;margin:2px;">AlphaFold_only</span> ä»… AI é¢„æµ‹ç»“æ„ â†’ å¯¹æ¥ç»“æœéœ€è°¨æ…è§£è¯»<br>
    <span style="display:inline-block;background:#fce4ec;color:#c62828;padding:2px 8px;border-radius:8px;font-size:11px;margin:2px;">none</span> æ— ç»“æ„æ•°æ® â†’ æ— æ³•åšåˆ†å­å¯¹æ¥<br><br>
    <b>æ•°æ®æ¥æºï¼š</b>edge_drug_target.csv + node_target.csv + target_xref.csv è‡ªåŠ¨ join
  </div>

  <h3>ä¸¤ä¸ª Bridge çš„åŒºåˆ«</h3>
  <div class="compare-box">
    <div class="compare-col compare-a">
      <b>Direction A: è·¨ç–¾ç—…è¿ç§»</b>
      æ¯ä¸ªè¯ç‰©çš„<b>å…¨å±€æœ€ä¼˜</b>ç–¾ç—…<br>
      ~50 ä¸ªè¯ç‰©<br>
      æ¥è‡ªå„ç§ç–¾ç—…é¢†åŸŸ<br>
      é«˜é£é™©é«˜å›æŠ¥<br>
      <span class="tag tag-file">bridge_repurpose_cross.csv</span>
    </div>
    <div class="compare-col compare-b">
      <b>Direction B: åŸç–¾ç—…é‡è¯„ä¼°</b>
      åªçœ‹<b>ç›®æ ‡ç–¾ç—…</b>å†…çš„å¾—åˆ†<br>
      ~83 ä¸ªè¯ç‰©<br>
      éƒ½æ˜¯åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–ç›¸å…³<br>
      ä½é£é™©ç¨³å¥<br>
      <span class="tag tag-file">bridge_origin_reassess.csv</span>
    </div>
  </div>

  <h3>Bridge ç”Ÿæˆæ•°æ®æµ</h3>
<div class="flow">drug_disease_rank.csv (54,000+ è¯ç‰©-ç–¾ç—…å¯¹)
         â”‚
         â”‚  + edge_drug_target.csv + node_target.csv + target_xref.csv
         â”‚    (è‡ªåŠ¨ join â†’ é¶ç‚¹å/UniProt/PDB/AlphaFold)
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                              â”‚
    â–¼                              â–¼
 V5 ranker å†…ç½®é€»è¾‘             generate_disease_bridge.py
 "æ¯ä¸ªè¯ç‰©å–å…¨å±€æœ€ä¼˜ç–¾ç—…"       "åªä¿ç•™ç›®æ ‡ç–¾ç—…çš„è¡Œ"
    â”‚                              â”‚
    â–¼                              â–¼
bridge_repurpose_cross.csv    bridge_origin_reassess.csv
 (~50 drugs + é¶ç‚¹/ç»“æ„)       (~83 drugs + é¶ç‚¹/ç»“æ„)
    â”‚                              â”‚
    â–¼                              â–¼
 â†’ LLM+RAG Direction A         â†’ LLM+RAG Direction B</div>
</div>

<!-- ==================== æ¨¡å— 4: LLM+RAG ==================== -->
<div id="mod4"></div>
<h2>4. LLM+RAG è¯æ®å·¥ç¨‹</h2>
<div class="card">
  <span class="module-label ml-4">æ–‡çŒ®è¯æ®æå–ä¸éªŒè¯</span>
  <p class="section-intro">ç”¨ PubMed æ–‡çŒ®æ£€ç´¢ + æœ¬åœ° LLM ç»“æ„åŒ–æå–ï¼Œä¸ºå€™é€‰è¯ç‰©ç”Ÿæˆæ–‡çŒ®æ”¯æŒè¯æ®ï¼Œè¿›è¡Œå¤šç»´åº¦æ‰“åˆ†å’Œé—¨æ§ç­›é€‰ã€‚<b>Step 0-5 ä¸ºé¢„å¤„ç†ï¼ˆä»… CT.gov æ¨¡å¼éœ€è¦ï¼‰ï¼ŒStep 6-9 ä¸ºæ ¸å¿ƒæµç¨‹ï¼Œä¸”ä¼šåˆ†åˆ«è·‘ Direction A å’Œ B ä¸¤éã€‚</b></p>

  <h3>é¢„å¤„ç†æ­¥éª¤ (ä»… CT.gov æ¨¡å¼)</h3>

  <div class="step" style="opacity: 0.7;">
    <span class="step-num">0</span><span class="step-title">æ„å»ºè¯•éªŒæ± </span>
    <span class="tag tag-api">CT.gov API</span>
    <p class="step-desc">ä»ç§å­ NCT ID åˆ—è¡¨æ‹‰å–ä¸´åºŠè¯•éªŒè¯¦æƒ…ã€‚</p>
  </div>

  <div class="step" style="opacity: 0.7;">
    <span class="step-num">1-3</span><span class="step-title">è·å–å¤±è´¥è¯ç‰©</span>
    <p class="step-desc">ç­›é€‰ç»ˆæ­¢/æ’¤å›è¯•éªŒ â†’ æå–è¯ç‰© â†’ è¿‡æ»¤å®‰æ…°å‰‚ â†’ æ ‡è®°ç»“å±€ã€‚</p>
  </div>

  <div class="step" style="opacity: 0.7;">
    <span class="step-num">4</span><span class="step-title">AI è¾…åŠ©è¯•éªŒæ ‡æ³¨</span>
    <span class="tag tag-llm">LLM</span>
    <p class="step-desc">AI é¢„å¡« + PubMed è¡¥å…… + äººå·¥å®¡æ ¸ã€‚</p>
  </div>

  <div class="step" style="opacity: 0.7;">
    <span class="step-num">5</span><span class="step-title">è¯ç‰©åè§„èŒƒåŒ–</span>
    <p class="step-desc">å»é™¤å‰‚é‡è¯ç¼€ + æ¨¡ç³Šå»é‡ (92%) + MD5 å“ˆå¸Œ IDã€‚</p>
  </div>

  <h3>æ ¸å¿ƒæµç¨‹ (Direction A å’Œ B å„è·‘ä¸€é)</h3>

  <div class="highlight">
    <b>å…³é”®ç†è§£ï¼š</b>Step 6-9 æ˜¯åŒä¸€å¥—ä»£ç ï¼Œä½†åˆ†åˆ«ç”¨ bridge_repurpose_cross.csv å’Œ bridge_origin_reassess.csv ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºåˆ°ä¸åŒç›®å½•ã€‚ä¸¤æ¡è·¯çº¿å®Œå…¨ç‹¬ç«‹ã€å¹¶è¡Œã€‚
  </div>

  <div class="step" style="border-left-color: #af52de;">
    <span class="step-num" style="background:#af52de;">6</span><span class="step-title">PubMed RAG + LLM è¯æ®æå– â˜… æ ¸å¿ƒ</span>
    <span class="tag tag-api">PubMed</span> <span class="tag tag-llm">Ollama qwen2.5:7b</span>
    <p class="step-desc">
      <b>ä¸‰é˜¶æ®µæ£€ç´¢ï¼š</b><br>
      1. PubMed å¤šè·¯æ£€ç´¢ï¼ˆç²¾ç¡®ç–¾ç—… + ç»ˆç‚¹é©±åŠ¨ + è·¨ç–¾ç—…ç±»æ¯”ï¼‰<br>
      2. BM25 æ’åº â†’ Top 80 â†’ åµŒå…¥è¯­ä¹‰é‡æ’ â†’ Top 30<br>
      3. æœ¬åœ° LLM ç»“æ„åŒ–æå–ï¼šæ–¹å‘ / æ¨¡å‹ / ç»ˆç‚¹ / æœºåˆ¶ / ç½®ä¿¡åº¦<br><br>
      <b>ä¸‰å±‚å¹»è§‰æ£€æµ‹ï¼š</b>PMID ä¸€è‡´æ€§ + è¯ç‰©é”šå®š + æœºåˆ¶é”šå®š<br><br>
      <b>Direction A è¾“å…¥ï¼š</b><span class="tag tag-file">bridge_repurpose_cross.csv</span> â†’ ç›®æ ‡ç–¾ç—…æ£€ç´¢<br>
      <b>Direction B è¾“å…¥ï¼š</b><span class="tag tag-file">bridge_origin_reassess.csv</span> â†’ ç»ˆç‚¹ç‰¹å¼‚æ€§æ£€ç´¢
    </p>
    <p class="io"><span class="tag tag-out">OUT</span> dossiers/*.json + step6_rank_v2.csv</p>
  </div>

  <div class="step">
    <span class="step-num">7</span><span class="step-title">å¤šç»´æ‰“åˆ† + é—¨æ§</span>
    <p class="step-desc">
      <b>5 ç»´åº¦æ‰“åˆ†ï¼ˆæ»¡åˆ† 100ï¼‰ï¼š</b>

      <table>
        <tr><th>ç»´åº¦</th><th>åˆ†å€¼</th><th>å«ä¹‰</th></tr>
        <tr><td>è¯æ®å¼ºåº¦</td><td>0-30</td><td>benefit æ–‡çŒ® &times;2 - harm &times;1</td></tr>
        <tr><td>æœºåˆ¶åˆç†æ€§</td><td>0-20</td><td>æœ‰æœºåˆ¶æè¿°çš„æ–‡çŒ®å æ¯”</td></tr>
        <tr><td>å¯è½¬åŒ–æ€§</td><td>0-20</td><td>äººä½“ç ”ç©¶ + ä¸´åºŠé˜¶æ®µ + ç–¾ç—…è¿‘ä¼¼åº¦</td></tr>
        <tr><td>å®‰å…¨æ€§</td><td>0-20</td><td>harm åé¢ + é»‘åå•ç½šåˆ†</td></tr>
        <tr><td>å¯è¡Œæ€§</td><td>0-10</td><td>å¯åŠæ€§ + ç”Ÿäº§å¯è¡Œæ€§</td></tr>
      </table>
      <br>
      <b>é—¨æ§ï¼š</b>ç¡¬é—¨æ§ (benefit&lt;2 / harm&gt;50% / æ–‡çŒ®&lt;3 â†’ NO-GO) + è½¯é—¨æ§ (&ge;60â†’GO / 40-60â†’MAYBE / &lt;40â†’NO-GO)
    </p>
    <p class="io"><span class="tag tag-out">OUT</span> step7_gating_decision.csv + step7_hypothesis_cards.md</p>
  </div>

  <div class="step">
    <span class="step-num">8</span><span class="step-title">å‘å¸ƒé—¨æ§ + å€™é€‰æ‰“åŒ… (å«é¶ç‚¹/ç»“æ„ä¿¡æ¯)</span>
    <p class="step-desc">ç§»é™¤ NO-GOï¼ŒæŒ‰æ€»åˆ†æ’åº Top-Kï¼Œå¯¼å‡º Excel å·¥ä½œç°¿ã€‚<br><br>
      <b>é¶ç‚¹ç»“æ„ä¿¡æ¯ (2026-02-16 æ–°å¢)ï¼š</b>è‡ªåŠ¨ä» bridge CSV è¯»å–é¶ç‚¹æ•°æ®ï¼Œå¹¶è¾“å‡ºåˆ°ï¼š<br>
      &bull; <b>Excel æ€»è¡¨</b> â€” å¢åŠ  targets åˆ—<br>
      &bull; <b>Excel æ¯è¯ Sheet</b> â€” å¢åŠ é¶ç‚¹ç»“æ„è¡¨ï¼ˆTarget ChEMBL ID / UniProt / ä½œç”¨æœºåˆ¶ / Structure Source / PDB Count / PDB IDsï¼‰<br>
      &bull; <b>Markdown one-pager</b> â€” å¢åŠ é¶ç‚¹å°èŠ‚ï¼Œå« UniProt é“¾æ¥å’Œ PDB é“¾æ¥ï¼Œæ ‡æ³¨ç»“æ„æ¥æº badge
    </p>
    <p class="io"><span class="tag tag-out">OUT</span> step8_fusion_rank_report.xlsx â˜… æ ¸å¿ƒäº¤ä»˜ç‰© (å«é¶ç‚¹ç»“æ„è¡¨)</p>
  </div>

  <div class="step">
    <span class="step-num">9</span><span class="step-title">éªŒè¯æ–¹æ¡ˆç”Ÿæˆ</span>
    <p class="step-desc">ä¸ºæ¯ä¸ªå…¥é€‰è¯ç‰©ç”Ÿæˆï¼šå®éªŒç±»å‹ã€å…³é”®é—®é¢˜ã€è¯»æ•°æŒ‡æ ‡ã€æˆåŠŸæ ‡å‡†ã€æ—¶é—´ã€ä¼˜å…ˆçº§ (P1/P2/P3)ã€‚</p>
    <p class="io"><span class="tag tag-out">OUT</span> step9_validation_plan.csv + step9_validation_plan.md</p>
  </div>

  <h3>æœ¬æ¨¡å—æ•°æ®æµï¼ˆåŒè·¯çº¿ï¼‰</h3>
<div class="flow">               bridge_repurpose_cross.csv    bridge_origin_reassess.csv
               (æ¥è‡ª kg_explain)              (æ¥è‡ª kg_explain)
                       â”‚                              â”‚
                       â–¼                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Direction A   â”‚             â”‚  Direction B   â”‚
              â”‚  Step 6: RAG   â”‚             â”‚  Step 6: RAG   â”‚
              â”‚  PubMed + LLM  â”‚             â”‚  PubMed + LLM  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼                              â–¼
              step6_repurpose_cross/          step6_origin_reassess/
              â”œâ”€â”€ dossiers/*.json            â”œâ”€â”€ dossiers/*.json
              â””â”€â”€ step6_rank_v2.csv          â””â”€â”€ step6_rank_v2.csv
                      â”‚                              â”‚
                      â–¼                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Step 7: æ‰“åˆ†   â”‚             â”‚  Step 7: æ‰“åˆ†   â”‚
              â”‚  5ç»´ + é—¨æ§     â”‚             â”‚  5ç»´ + é—¨æ§     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼                              â–¼
              step7_repurpose_cross/          step7_origin_reassess/
              â”œâ”€â”€ gating_decision.csv        â”œâ”€â”€ gating_decision.csv
              â””â”€â”€ hypothesis_cards.md        â””â”€â”€ hypothesis_cards.md
                      â”‚                              â”‚
                      â–¼                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Step 8: æ‰“åŒ…   â”‚             â”‚  Step 8: æ‰“åŒ…   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼                              â–¼
              step8_repurpose_cross/          step8_origin_reassess/
              â””â”€â”€ fusion_rank_report.xlsx        â””â”€â”€ fusion_rank_report.xlsx
                      â”‚                              â”‚
                      â–¼                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Step 9: éªŒè¯   â”‚             â”‚  Step 9: éªŒè¯   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼                              â–¼
              step9_repurpose_cross/          step9_origin_reassess/
              â””â”€â”€ validation_plan.csv        â””â”€â”€ validation_plan.csv

                      â”‚                              â”‚
                      â–¼                              â–¼
              è·¨ç–¾ç—…å€™é€‰æ¸…å•                åŸç–¾ç—…å€™é€‰æ¸…å•
              (é«˜é£é™©é«˜å›æŠ¥)               (ç¨³å¥é‡è¯„ä¼°)</div>
</div>

<!-- ==================== Direction A vs B è¯¦è§£ ==================== -->
<div id="dir-ab"></div>
<h2 style="background: linear-gradient(135deg, #e84393, #00b894);">5. Direction A vs B è¯¦è§£</h2>
<div class="card">
  <p class="section-intro">ä¸¤æ¡è·¯çº¿å›ç­”ä¸åŒçš„ç§‘å­¦é—®é¢˜ï¼Œä½¿ç”¨ç›¸åŒçš„æ–¹æ³•è®ºä½†è¾“å…¥ä¸åŒçš„è¯ç‰©é›†åˆã€‚</p>

  <div class="highlight-pink">
    <b>Direction A: è·¨ç–¾ç—…è¿ç§» (Repurpose Cross)</b><br><br>
    <b>ç§‘å­¦é—®é¢˜ï¼š</b>"æœ‰æ²¡æœ‰åŸæœ¬ç”¨äº<b>å…¶ä»–ç–¾ç—…</b>çš„è¯ç‰©ï¼Œå…¶é¶ç‚¹æœºåˆ¶æ°å¥½ä¹Ÿèƒ½æ²»ç–—åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–ï¼Ÿ"<br><br>
    <b>ç­–ç•¥ï¼š</b>æ¢ç´¢æ€§ (Exploration) â€” ä»æœªåœ¨ç›®æ ‡ç–¾ç—…ä¸­æµ‹è¯•è¿‡çš„è¯ç‰©<br><br>
    <b>è¯ç‰©æ¥æºä¸¾ä¾‹ï¼š</b><br>
    &bull; JAK æŠ‘åˆ¶å‰‚ï¼ˆæ¥è‡ªè‡ªèº«å…ç–«é¢†åŸŸï¼‰â†’ å¯èƒ½æœ‰æŠ—ç‚ä½œç”¨<br>
    &bull; BTK æŠ‘åˆ¶å‰‚ï¼ˆæ¥è‡ªè‚¿ç˜¤é¢†åŸŸï¼‰â†’ å¯èƒ½æŠ‘åˆ¶å·¨å™¬ç»†èƒæµ¸æ¶¦<br>
    &bull; Caspase æŠ‘åˆ¶å‰‚ï¼ˆæ¥è‡ªè‚ç—…é¢†åŸŸï¼‰â†’ å¯èƒ½æŠ‘åˆ¶æ–‘å—å†…ç»†èƒå‡‹äº¡<br><br>
    <b>é£é™©æ”¶ç›Šï¼š</b>é«˜é£é™© / é«˜å›æŠ¥ / é«˜æ–°é¢–æ€§<br>
    <b>å…¸å‹å€™é€‰æ•°ï¼š</b>~50 ä¸ªè¯ç‰© â†’ ç­›åˆ° ~5 ä¸ª GO<br><br>
    <b>è¾“å…¥æ–‡ä»¶ï¼š</b><span class="tag tag-file">bridge_repurpose_cross.csv</span><br>
    <b>è¾“å‡ºç›®å½•ï¼š</b>step{6,7,8,9}_repurpose_cross/
  </div>

  <div class="highlight-green">
    <b>Direction B: åŸç–¾ç—…é‡è¯„ä¼° (Origin Reassess)</b><br><br>
    <b>ç§‘å­¦é—®é¢˜ï¼š</b>"é‚£äº›åœ¨åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–è¯•éªŒä¸­<b>å¤±è´¥è¿‡</b>çš„è¯ç‰©ï¼Œæ˜¯ä¸æ˜¯å› ä¸ºé€‰é”™äº†ç»ˆç‚¹/äººç¾¤/å‰‚é‡æ‰å¤±è´¥çš„ï¼Ÿå€¼å¾—å†è¯•å—ï¼Ÿ"<br><br>
    <b>ç­–ç•¥ï¼š</b>åˆ©ç”¨æ€§ (Exploitation) â€” å·²æœ‰ç›®æ ‡ç–¾ç—…æ•°æ®çš„è¯ç‰©<br><br>
    <b>è¯ç‰©æ¥æºä¸¾ä¾‹ï¼š</b><br>
    &bull; Digitoxin â€” å¿ƒè„è¯ç‰©ï¼Œåœ¨å† è„‰ç²¥æ ·ç¡¬åŒ–æœ‰ä¿¡å·ä½†è¯•éªŒç»ˆæ­¢<br>
    &bull; Emricasan â€” caspase æŠ‘åˆ¶å‰‚ï¼Œè‚ç—…å¤±è´¥ä½†æœ‰å¿ƒè¡€ç®¡è¡¨å‹é‡å <br>
    &bull; å„ç§é™è„‚/æŠ—ç‚è¯ â€” ä¸€æœŸæˆåŠŸä½†äºŒ/ä¸‰æœŸå¤±è´¥<br><br>
    <b>é£é™©æ”¶ç›Šï¼š</b>ä½é£é™© / ä¸­ç­‰å›æŠ¥ / æ›´å¤šå·²æœ‰æ•°æ®<br>
    <b>å…¸å‹å€™é€‰æ•°ï¼š</b>~83 ä¸ªè¯ç‰© â†’ ç­›åˆ° ~10 ä¸ª GO<br><br>
    <b>è¾“å…¥æ–‡ä»¶ï¼š</b><span class="tag tag-file">bridge_origin_reassess.csv</span><br>
    <b>è¾“å‡ºç›®å½•ï¼š</b>step{6,7,8,9}_origin_reassess/
  </div>

  <h3>å¯¹æ¯”æ€»ç»“</h3>
  <table>
    <tr><th></th><th style="color:#e84393;">Dir A: è·¨ç–¾ç—…</th><th style="color:#00b894;">Dir B: åŸç–¾ç—…</th></tr>
    <tr><td><b>ç§‘å­¦é—®é¢˜</b></td><td>å…¶ä»–ç–¾ç—…çš„è¯èƒ½å¦è¿ç§»ï¼Ÿ</td><td>å¤±è´¥çš„è¯æ˜¯å¦å€¼å¾—é‡è¯•ï¼Ÿ</td></tr>
    <tr><td><b>è¯ç‰©æ± </b></td><td>å…¨å±€æœ€ä¼˜å¾—åˆ†ï¼ˆä»»ä½•ç–¾ç—…ï¼‰</td><td>ä»…ç›®æ ‡ç–¾ç—…å†…çš„å¾—åˆ†</td></tr>
    <tr><td><b>æ¡¥æ¥æ–‡ä»¶</b></td><td>bridge_repurpose_cross</td><td>bridge_origin_reassess</td></tr>
    <tr><td><b>æ–‡çŒ®æ£€ç´¢ç­–ç•¥</b></td><td>è·¨ç–¾ç—…è¯æ® + æœºåˆ¶ç±»æ¯”</td><td>ç»ˆç‚¹ç‰¹å¼‚æ€§ + ä¸´åºŠå†åˆ†æ</td></tr>
    <tr><td><b>å…¸å‹è¯ç‰©æ•°</b></td><td>~50</td><td>~83</td></tr>
    <tr><td><b>é£æ ¼</b></td><td>æ¢ç´¢æ€§ (Exploration)</td><td>åˆ©ç”¨æ€§ (Exploitation)</td></tr>
    <tr><td><b>é£é™©</b></td><td>é«˜</td><td>ä½</td></tr>
    <tr><td><b>æ–°é¢–æ€§</b></td><td>é«˜</td><td>ä¸­</td></tr>
    <tr><td><b>æ”¯æŒæ–‡çŒ®æ³¨å…¥</b></td><td>å¦</td><td>æ˜¯ (--inject YAML)</td></tr>
    <tr><td><b>é¢å¤–å­—æ®µ</b></td><td>åŸºç¡€åˆ— + é¶ç‚¹/ç»“æ„</td><td>CIã€confidence_tierã€source + é¶ç‚¹/ç»“æ„</td></tr>
  </table>

  <div class="highlight">
    <b>ä¸ºä»€ä¹ˆè¦ä¸¤æ¡è·¯çº¿ï¼Ÿ</b><br>
    è¿™æ˜¯"æ¢ç´¢-åˆ©ç”¨"(Exploration-Exploitation) ç­–ç•¥çš„ç»å…¸åº”ç”¨ã€‚Direction A è¿½æ±‚æ–°é¢–æ€§å‘ç°ï¼ŒDirection B è¿½æ±‚ç¨³å¥å†è¯„ä¼°ã€‚ä¸¤æ¡è·¯çº¿äº§å‡ºç‹¬ç«‹çš„å€™é€‰æ¸…å•ï¼Œæœ€ç»ˆç”±ç ”ç©¶è€…æ ¹æ®èµ„æºã€æˆ˜ç•¥ä¼˜å…ˆçº§å’Œè¯æ®è´¨é‡ç»¼åˆå†³ç­–ã€‚
  </div>
</div>

<!-- ==================== è·‘å®Œä¸€è½®åæ•°æ®æ£€æŸ¥ ==================== -->
<div id="postrun"></div>
<h2 style="background: linear-gradient(135deg, #6c5ce7, #a29bfe);">6. è·‘å®Œä¸€è½®åæ•°æ®æ£€æŸ¥</h2>
<div class="card">
  <p class="section-intro">æ¯æ¬¡å®Œæ•´è¿è¡Œåï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ£€æŸ¥å…³é”®è¾“å‡ºã€‚</p>

  <h3>ç¬¬ä¸€ä¼˜å…ˆï¼šçœ‹ç»“è®º</h3>
  <div class="step" style="border-left-color: #e17055;">
    <span class="step-num" style="background:#e17055;">1</span><span class="step-title">å€™é€‰è¯ç‰©æ¸…å•</span>
    <p class="step-desc">
      &bull; æ‰“å¼€ <b>step8_fusion_rank_report.xlsx</b> â†’ Shortlist sheet â†’ ç¡®è®¤å€™é€‰è¯æ•°é‡å’Œ GO/MAYBE/NO-GO åˆ†å¸ƒ<br>
      &bull; æ¯ä¸ªè¯çš„ Sheet â†’ æ£€æŸ¥<b>é¶ç‚¹ç»“æ„è¡¨</b> (Structure Source åˆ—)ï¼š<br>
      <span style="display:inline-block;background:#e8f5e9;color:#2e7d32;padding:1px 6px;border-radius:6px;font-size:10px;margin:2px;">PDB+AlphaFold</span> å¯ç›´æ¥åšåˆ†å­å¯¹æ¥ï¼Œé€‰å®éªŒ PDB
      <span style="display:inline-block;background:#fff3e0;color:#e65100;padding:1px 6px;border-radius:6px;font-size:10px;margin:2px;">AlphaFold_only</span> å¯¹æ¥ç»“æœéœ€è°¨æ…è§£è¯»
      <span style="display:inline-block;background:#fce4ec;color:#c62828;padding:1px 6px;border-radius:6px;font-size:10px;margin:2px;">none</span> æ— æ³•åšåˆ†å­å¯¹æ¥<br>
      &bull; æŸ¥çœ‹ <b>step9_validation_plan.csv</b> â†’ å…³æ³¨ P1 ä¼˜å…ˆçº§å€™é€‰è¯<br>
      &bull; å¯¹æ¯” cross vs origin ä¸¤æ¡è·¯çº¿ â†’ é‡å å€™é€‰è¯ = æ›´å¯ä¿¡
    </p>
  </div>

  <h3>ç¬¬äºŒä¼˜å…ˆï¼šåˆ¤æ–­å¯ä¿¡åº¦</h3>
  <div class="step" style="border-left-color: #fdcb6e;">
    <span class="step-num" style="background:#fdcb6e;color:#1d1d1f;">2</span><span class="step-title">è¯æ®è¯„ä¼°</span>
    <p class="step-desc">
      &bull; <b>step7_cards.json</b> â†’ æ¯è¯ GO/MAYBE/NO-GO å†³ç­– + 5 ç»´æ‰“åˆ†<br>
      &bull; <b>step8_one_pagers_topK.md</b> â†’ å€™é€‰è¯ Markdown æŠ¥å‘Šï¼ˆå«é¶ç‚¹/UniProt/PDB é“¾æ¥ï¼‰<br>
      &bull; <b>bridge_*.csv</b> â†’ KG æ’å + é¶ç‚¹ä¿¡æ¯ + ç»“æ„æ¥æºæ ‡è®°
    </p>
  </div>

  <h3>ç¬¬ä¸‰ä¼˜å…ˆï¼šæ’æŸ¥é—®é¢˜</h3>
  <div class="step" style="border-left-color: #74b9ff;">
    <span class="step-num" style="background:#74b9ff;color:#1d1d1f;">3</span><span class="step-title">è°ƒè¯•æ’æŸ¥</span>
    <p class="step-desc">
      &bull; <b>drug_disease_rank.csv</b> â†’ æŸè¯æ’åé«˜/ä½çš„åŸå› <br>
      &bull; <b>poolA_drug_level.csv</b> â†’ CT.gov æ‹‰åˆ°äº†å“ªäº›è¯<br>
      &bull; <b>manual_review_queue.csv</b> â†’ éœ€äººå·¥ç¡®è®¤çš„è¯•éªŒ<br>
      &bull; <b>step6 dossiers/*.json</b> â†’ æŸè¯çš„ PubMed è¯æ®åŸæ–‡<br>
      &bull; <b>run_summary.json</b> â†’ è¿è¡Œæ˜¯å¦æœ‰æ­¥éª¤å¤±è´¥/è¢«éš”ç¦»
    </p>
  </div>

  <div class="highlight">
    <b>è¯¦ç»†å®¡æ ¸æµç¨‹</b>è¯·å‚è€ƒ <span style="font-family:monospace;font-size:11px;">RUN_REVIEW_CHECKLIST.md</span>ï¼Œå« release gate é˜ˆå€¼ï¼ˆkill_rate &le; 0.15, miss_rate &le; 0.10, IRR kappa &ge; 0.60ï¼‰å’Œæ³„æ¼å®¡è®¡è¦æ±‚ã€‚
  </div>
</div>

<!-- ==================== è¿ç»´å·¥å…·é“¾ ==================== -->
<div id="ops"></div>
<h2 style="background: linear-gradient(135deg, #636e72, #b2bec3);">7. è¿ç»´å·¥å…·é“¾ (ops)</h2>
<div class="card">
  <p class="section-intro">ä» GEO æ•°æ®é›†è‡ªåŠ¨å‘ç°åˆ°ä¸€é”®å¯åŠ¨ç®¡çº¿çš„å®Œæ•´å·¥å…·é“¾ã€‚è§£å†³äº†ä¹‹å‰éœ€è¦æ‰‹åŠ¨æŸ¥ GEOã€æ‰‹åŠ¨å†™ configã€æ‰‹åŠ¨å»º venv çš„ç—›ç‚¹ã€‚<b>2026-02-26 æ›´æ–°</b>ï¼šrunner.sh ç°åœ¨<b>å…¨è‡ªåŠ¨</b>ä¸ºæ–°ç–¾ç—…ç”Ÿæˆç­¾å configï¼ˆGEO â†’ dsmeta config â†’ ARCHS4 fallbackï¼‰ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨é…ç½®ã€‚</p>

  <h3>å·¥å…·é“¾æ¦‚è§ˆ</h3>
  <div class="highlight-green">
    <b>ğŸ†• å…¨è‡ªåŠ¨æ¨¡å¼ (2026-02-26)ï¼š</b>åªéœ€åœ¨ disease list åŠ ä¸€è¡Œï¼ˆdisease_key | disease_query | EFO_IDï¼‰ï¼Œ<code>bash ops/start.sh start</code> å³å¯è‡ªåŠ¨è·‘ Cross + Origin åŒè·¯çº¿ã€‚runner.sh çš„ <code>ensure_cross_signature_config()</code> ä¼šè‡ªåŠ¨ä¸ºæ–°ç–¾ç—…ç”Ÿæˆç­¾å configã€‚
  </div>
<div class="flow-light">runner.sh ensure_cross_signature_config()     â† å…¨è‡ªåŠ¨ï¼ˆæ–°ç–¾ç—…æ— éœ€æ‰‹åŠ¨é…ç½®ï¼‰
â”‚
â”œâ”€ å·²æœ‰ dsmeta æˆ– ARCHS4 config?  â†’ è·³è¿‡
â”‚
â”œâ”€ â‘  auto_discover_geo.py æœ NCBI GEO
â”‚     â†’ æ‰¾åˆ° GSE â†’ generate_dsmeta_configs.py â†’ dsmeta config âœ…
â”‚
â””â”€ â‘¡ GEO å¤±è´¥ â†’ archs4/scripts/auto_generate_config.py
      â†’ ç”¨ DISEASE_KEYWORD_MAP + EFO ID â†’ ARCHS4 config âœ…
      â†’ ä¹Ÿå¤±è´¥ â†’ skip Cross â†’ Origin ç…§è·‘

ç„¶åè¿›å…¥ run_cross_route()ï¼ŒæŒ‰ SIG_PRIORITY é¡ºåºè¿è¡Œ:
  dsmeta pipeline  â†’  å¤±è´¥ â†’ fallback â†’  ARCHS4 pipeline  â†’  éƒ½å¤±è´¥ â†’ skip Cross</div>

  <h3>æ‰‹åŠ¨ç²¾ç»†æ§åˆ¶å·¥å…·é“¾ï¼ˆå¯é€‰ï¼‰</h3>
<div class="flow-light">auto_discover_geo.py  â”€â”€â†’  AI è¾…åŠ©å®¡æ ¸  â”€â”€â†’  generate_dsmeta_configs.py  â”€â”€â†’  start.sh
â”‚                         â”‚                  â”‚                               â”‚
â”‚ æœ NCBI GEO             â”‚ å–‚ discovery_log â”‚ è¯»å– selected.tsv             â”‚ ç¯å¢ƒæ£€æŸ¥
â”‚ è¿‡æ»¤ + æ‰“åˆ†              â”‚ ç»™ Claude/GPT    â”‚ ç”Ÿæˆ dsmeta YAML              â”‚ å®‰è£… venv
â”‚ è‡ªåŠ¨æ£€æµ‹ case/control    â”‚ æ£€æŸ¥ 6 é¡¹è´¨é‡    â”‚ æ›´æ–° disease_list_dual.txt    â”‚ å¯åŠ¨ 24/7 runner
â”‚                         â”‚ ç¼–è¾‘ YAML ç§»é™¤   â”‚                               â”‚
â–¼                         â–¼                  â–¼                               â–¼
geo_curation/<disease>/   å®¡æ ¸åçš„ YAML      dsmeta/configs/<disease>.yaml   nohup background
â”œâ”€â”€ candidates.tsv        (ç§»é™¤ä¸åˆæ ¼ GSE)   (ready for pipeline)            + log + PID ç®¡ç†
â”œâ”€â”€ selected.tsv
â”œâ”€â”€ discovery_log.txt     â† å–‚ç»™ LLM å®¡æ ¸çš„æ–‡ä»¶
â”œâ”€â”€ candidate_config.yaml
â””â”€â”€ route_recommendation.txt</div>

  <h3>â‘  auto_discover_geo.py â€” GEO æ•°æ®é›†è‡ªåŠ¨å‘ç°</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šç»™å®šç–¾ç—…åï¼Œè‡ªåŠ¨æœç´¢ GEO æ‰¾åˆ°é€‚åˆçš„è¡¨è¾¾è°±æ•°æ®é›†</span>
    <div class="step-desc">
      çº¯è§„åˆ™å¼•æ“ï¼Œæ— éœ€ LLMã€‚é€šè¿‡ NCBI E-utilities æœç´¢ â†’ ç¡¬ç¼–ç è¿‡æ»¤ï¼ˆç‰©ç§/ç±»å‹/æ ·æœ¬æ•°ï¼‰â†’ æ­£åˆ™åŒ¹é… case/control â†’ æ‰“åˆ†æ’å â†’ è¾“å‡º top-K å€™é€‰ â†’ è‡ªåŠ¨è¾“å‡ºè·¯çº¿æ¨èã€‚
    </div>
    <div class="io">
      <b>å•ä¸ªç–¾ç—…ï¼š</b><code>python auto_discover_geo.py --disease "heart failure" --write-yaml</code><br>
      <b>æ‰¹é‡æ¨¡å¼ï¼š</b><code>python auto_discover_geo.py --batch disease_list_day1_origin.txt --write-yaml</code><br>
      <b>è¿‡æ»¤è§„åˆ™ï¼š</b>Human only, expression profiling, â‰¥6 samples, æ’é™¤ cell line/animal/miRNA/methylation<br>
      <b>æ‰“åˆ†ç»´åº¦ï¼š</b>æ ·æœ¬æ•°(30åˆ†) + å¹³è¡¡æ€§(20åˆ†) + å¹³å°è´¨é‡(20åˆ†) + åˆ†ç±»ç½®ä¿¡åº¦(20åˆ†) + æ—¶æ•ˆæ€§(10åˆ†)<br>
      <b>è·¯çº¿æ¨èï¼š</b>0 GSE â†’ åªèµ° B | 1 GSE â†’ A ä½å¯ä¿¡åº¦ | 2-3 â†’ A å¯ç”¨ | â‰¥4 â†’ A ç†æƒ³
    </div>
    <span class="tag tag-api">NCBI E-utilities</span>
    <span class="tag tag-py">Python çº¯è§„åˆ™</span>
    <span class="tag tag-out">candidates.tsv + selected.tsv + candidate_config.yaml + route_recommendation.txt</span>
  </div>

  <h3>â‘¡ AI è¾…åŠ©å®¡æ ¸ â€” ç”¨ LLM éªŒè¯ GSE è´¨é‡ï¼ˆ2026-02-16 æ–°å¢ï¼‰</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šæŠŠ discovery_log.txt å–‚ç»™ Claude/ChatGPTï¼Œè‡ªåŠ¨æ£€æŸ¥ GSE æ•°æ®é›†è´¨é‡</span>
    <div class="step-desc">
      auto_discover_geo çš„è§„åˆ™å¼•æ“å¯ä»¥è¿‡æ»¤å¤§éƒ¨åˆ†ä¸åˆæ ¼æ•°æ®é›†ï¼Œä½†ä»æœ‰æ¼ç½‘ä¹‹é±¼ï¼ˆå¦‚ 16S rRNA è¢«å½“ä½œè¡¨è¾¾è°±ã€PAH è¢«æ··å…¥é«˜è¡€å‹æœç´¢ç»“æœï¼‰ã€‚
      AI å®¡æ ¸èƒ½å‘ç°è§„åˆ™å¼•æ“é—æ¼çš„ 6 ç±»é—®é¢˜ï¼Œå®¡æ ¸åç¼–è¾‘ YAML ç§»é™¤ä¸åˆæ ¼ GSEã€‚
    </div>
    <div class="io">
      <b>è¾“å…¥ï¼š</b><code>ops/geo_curation/&lt;disease&gt;/discovery_log.txt</code><br>
      <b>æ“ä½œï¼š</b>å¤åˆ¶å†…å®¹ç»™ LLMï¼Œé—®"è¯·å®¡æ ¸è¿™äº› GSE é€‰æ‹©"<br>
      <b>å®¡æ ¸åï¼š</b>ç¼–è¾‘ <code>dsmeta_signature_pipeline/configs/&lt;disease&gt;.yaml</code>ï¼š
      <ul style="margin:4px 0 4px 18px;font-size:12px;">
        <li>ä» <code>geo.gse_list</code> åˆ æ‰ä¸åˆæ ¼ GSE ID</li>
        <li>ä» <code>labeling.regex_rules</code> åˆ æ‰å¯¹åº”æ ‡æ³¨å—</li>
        <li>å®¡æ ¸å GSE &lt; 2 â†’ ä» <code>disease_list_day1_dual.txt</code> ç§»é™¤è¯¥ç–¾ç—…</li>
      </ul>
    </div>
    <table style="font-size:12px;margin-top:6px;">
      <tr><th>æ£€æŸ¥é¡¹</th><th>ä¸åˆæ ¼ â†’ ç§»é™¤</th><th>å®é™…æ¡ˆä¾‹</th></tr>
      <tr><td>æ•°æ®ç±»å‹</td><td>é mRNA è¡¨è¾¾è°±</td><td>GSE242047 = 16S rRNA</td></tr>
      <tr><td>ç–¾ç—…åŒ¹é…</td><td>GSE ç ”ç©¶çš„æ˜¯å…¶ä»–ç–¾ç—…</td><td>hypertension æœåˆ° PAH</td></tr>
      <tr><td>ç»„ç»‡/ç»†èƒ</td><td>ç»†èƒç³»ã€æˆçº¤ç»´ç»†èƒ</td><td>GSE133754 = æˆçº¤ç»´ç»†èƒ</td></tr>
      <tr><td>Case/Control</td><td>regex åŒ¹é…é”™è¯¯åˆ†ç»„</td><td>æ¯”è¾ƒäºšå‹è€Œé disease vs healthy</td></tr>
      <tr><td>é‡å¤</td><td>åŒä¸€æ•°æ®é›†å‡ºç°ä¸¤æ¬¡</td><td>'48060' = GSE48060</td></tr>
      <tr><td>ç ”ç©¶è®¾è®¡</td><td>é case-control è½¬å½•ç»„</td><td>GSE220865 = æ•ˆåŠ›æµ‹è¯•</td></tr>
    </table>
    <span class="tag tag-py">Claude / ChatGPT</span>
    <span class="tag tag-out">å®¡æ ¸åçš„ YAML (ç§»é™¤ä¸åˆæ ¼ GSE)</span>
  </div>

  <h3>â‘¢ generate_dsmeta_configs.py â€” æ‰¹é‡ç”Ÿæˆ dsmeta é…ç½®</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šä» GEO å‘ç°ç»“æœæ‰¹é‡ç”Ÿæˆ dsmeta YAML é…ç½®æ–‡ä»¶</span>
    <div class="step-desc">
      è¯»å– auto_discover_geo è¾“å‡ºçš„ selected.tsvï¼Œå¥—ç”¨æ ‡å‡†æ¨¡æ¿ç”Ÿæˆå®Œæ•´ dsmeta configã€‚å« TODO å ä½ç¬¦çš„é…ç½®éœ€äººå·¥å®¡æ ¸ã€‚å¯é€‰è‡ªåŠ¨æ›´æ–° disease_list_day1_dual.txtï¼ˆä»… â‰¥2 GSE ä¸”æ—  TODO çš„ç–¾ç—…ä¼šè¢«åŠ å…¥ï¼‰ã€‚è¾“å‡ºåˆ†ç±»æ±‡æ€»ï¼šâœ… Ready / âš ï¸ Low Confidence / ğŸ”§ Needs Review / âŒ Direction B Onlyã€‚
    </div>
    <div class="io">
      <b>ç”¨æ³•ï¼š</b><code>python generate_dsmeta_configs.py --geo-dir geo_curation --config-dir ../dsmeta_signature_pipeline/configs --update-disease-list</code><br>
      <b>DRY RUNï¼š</b><code>python generate_dsmeta_configs.py --geo-dir geo_curation --config-dir ... --dry-run</code>
    </div>
    <span class="tag tag-py">Python</span>
    <span class="tag tag-out">dsmeta configs + disease_list_day1_dual.txt</span>
  </div>

  <h3>â‘£ start.sh â€” ä¸€é”®å¯åŠ¨</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šç¯å¢ƒæ£€æŸ¥ + venvå®‰è£… + GEOå‘ç° + é…ç½®ç”Ÿæˆ + ç®¡çº¿å¯åŠ¨</span>
    <div class="step-desc">
      æ•´åˆäº†æ•´ä¸ªå¯åŠ¨æµç¨‹ã€‚æ”¯æŒå­å‘½ä»¤æ¨¡å¼ï¼š<code>check</code>ï¼ˆä»…æ£€æŸ¥ï¼‰ã€<code>setup</code>ï¼ˆä»…å®‰è£…ï¼‰ã€<code>discover</code>ï¼ˆä»…GEOå‘ç°ï¼‰ã€<code>start</code>ï¼ˆä»…å¯åŠ¨ï¼‰ã€<code>run &lt;disease&gt;</code>ï¼ˆè·‘å•ä¸ªç–¾ç—…ï¼‰ã€<code>status</code>ï¼ˆæŸ¥çœ‹çŠ¶æ€ï¼‰ã€<code>results</code>ï¼ˆæŸ¥çœ‹ç»“æœï¼‰ã€‚
    </div>
    <div class="io">
      <b>å®Œæ•´æµç¨‹ï¼š</b><code>bash ops/start.sh</code><br>
      <b>ä»…æ£€æŸ¥ï¼š</b><code>bash ops/start.sh check</code><br>
      <b>è·‘å•ä¸ªç–¾ç—…ï¼š</b><code>bash ops/start.sh run atherosclerosis</code><br>
      <b>æŒ‡å®šæ¨¡å¼ï¼š</b><code>bash ops/start.sh start --mode dual</code>
    </div>
    <span class="tag tag-r">Bash</span>
  </div>

  <h3>â‘¤ check_status.sh â€” ç®¡çº¿çŠ¶æ€ç›‘æ§</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šä¸€é”®æŸ¥çœ‹ç®¡çº¿è¿è¡ŒçŠ¶æ€ã€å¤±è´¥åŸå› ã€Ollama å¥åº·åº¦ã€ç£ç›˜å ç”¨</span>
    <div class="step-desc">
      ç®¡çº¿è·‘èµ·æ¥åï¼Œéšæ—¶å¯ä»¥ç”¨è¿™ä¸ªå·¥å…·æ£€æŸ¥æ¯ä¸ªç–¾ç—…çš„è¿è¡ŒçŠ¶æ€ã€‚æ”¯æŒ 6 ç§æ¨¡å¼ï¼šå…¨å±€æ¦‚è§ˆã€å•ä¸ªç–¾ç—…è¯¦æƒ…ã€å¤±è´¥è®°å½•ã€æœ€è¿‘ä¸€è½®ã€Ollama çŠ¶æ€ã€ç£ç›˜å ç”¨ã€‚
    </div>
    <div class="io">
      <b>å…¨å±€æ¦‚è§ˆï¼š</b><code>bash ops/check_status.sh</code><br>
      <b>å•ä¸ªç–¾ç—…ï¼š</b><code>bash ops/check_status.sh coronary_artery_disease</code><br>
      <b>åªçœ‹å¤±è´¥ï¼š</b><code>bash ops/check_status.sh --failures</code><br>
      <b>Ollama çŠ¶æ€ï¼š</b><code>bash ops/check_status.sh --ollama</code><br>
      <b>ç£ç›˜å ç”¨ï¼š</b><code>bash ops/check_status.sh --disk</code><br>
      <b>å…¨éƒ¨æ£€æŸ¥ï¼š</b><code>bash ops/check_status.sh --all</code>
    </div>
    <span class="tag tag-r">Bash</span>
  </div>

  <h3>â‘¥ merge_sig_to_bridge.py â€” SigReverse åˆ†æ•°åˆå¹¶ (2026-02-28 æ–°å¢)</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šå°† SigReverse çš„ reversal_score åˆå¹¶åˆ° bridge CSV ä¸­</span>
    <div class="step-desc">
      bridge CSV é»˜è®¤åªåŒ…å« kg_explain çš„æœºåˆ¶åˆ†æ•°ã€‚æ­¤è„šæœ¬é€šè¿‡è¯ç‰©åï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰åŒ¹é…ï¼Œå°† SigReverse çš„ <code>final_reversal_score</code> åˆ—åˆå¹¶åˆ° bridge CSV ä¸­ã€‚
      runner.sh åœ¨ Cross è·¯çº¿ä¸­è‡ªåŠ¨è°ƒç”¨ã€‚
    </div>
    <div class="io">
      <b>ç”¨æ³•ï¼š</b><code>python ops/merge_sig_to_bridge.py --bridge path/to/bridge.csv --sig-rank path/to/drug_reversal_rank.csv</code><br>
      <b>è¡Œä¸ºï¼š</b>in-place æ›´æ–° bridge CSVï¼Œæ— åŒ¹é…çš„è¯ç‰©ä¿æŒ NaNã€‚å¦‚æœ sig æ–‡ä»¶ä¸å­˜åœ¨åˆ™è·³è¿‡ã€‚
    </div>
    <span class="tag tag-py">Python</span>
    <span class="tag tag-out">bridge CSV + reversal_score åˆ—</span>
  </div>

  <h3>æ¨¡å—çº§è¶…æ—¶æ§åˆ¶ (2026-02-28 æ–°å¢)</h3>
  <div class="step">
    <span class="step-title">åŠŸèƒ½ï¼šä¸º runner.sh æ¯ä¸ªæ­¥éª¤å•ç‹¬è®¾ç½®è¶…æ—¶æ—¶é—´</span>
    <div class="step-desc">
      ä¹‹å‰æ‰€æœ‰æ­¥éª¤å…±äº« <code>STEP_TIMEOUT</code> (é»˜è®¤ 3600s)ã€‚ç°åœ¨æ–°å¢ 13 ä¸ªæ¨¡å—çº§å˜é‡ï¼ˆé»˜è®¤ç»§æ‰¿ STEP_TIMEOUTï¼‰ï¼Œå¯å•ç‹¬è°ƒæ•´æ…¢æ­¥éª¤çš„è¶…æ—¶ã€‚
    </div>
    <table style="font-size:11px;">
      <tr><th>å˜é‡</th><th>æ§åˆ¶çš„æ­¥éª¤</th></tr>
      <tr><td><code>TIMEOUT_CROSS_DSMETA</code></td><td>dsmeta ç­¾åç®¡çº¿</td></tr>
      <tr><td><code>TIMEOUT_CROSS_ARCHS4</code></td><td>ARCHS4 ç­¾åç®¡çº¿</td></tr>
      <tr><td><code>TIMEOUT_CROSS_SIGREVERSE</code></td><td>SigReverse åè½¬æŸ¥è¯¢</td></tr>
      <tr><td><code>TIMEOUT_CROSS_KG_SIGNATURE</code></td><td>KG ç­¾åæ¨¡å¼æ’å</td></tr>
      <tr><td><code>TIMEOUT_ORIGIN_KG_CTGOV</code></td><td>KG CT.gov æ¨¡å¼æ’å</td></tr>
      <tr><td><code>TIMEOUT_LLM_STEP6/7/8/9</code></td><td>LLM+RAG å„æ­¥éª¤</td></tr>
      <tr><td><code>TIMEOUT_CROSS_AUTO_DISCOVER_GEO</code></td><td>GEO è‡ªåŠ¨å‘ç°</td></tr>
      <tr><td><code>TIMEOUT_CROSS_GENERATE_*_CONFIG</code></td><td>dsmeta/ARCHS4 é…ç½®ç”Ÿæˆ</td></tr>
    </table>
    <div class="io">
      <b>ç”¨æ³•ï¼š</b><code>TIMEOUT_LLM_STEP6=14400 bash ops/start.sh run atherosclerosis</code>
    </div>
  </div>

  <h3>å¯åŠ¨å†³ç­–æ ‘</h3>
  <div class="highlight">
    <b>ç¬¬ä¸€æ¬¡è·‘ï¼Ÿ</b> â†’ <code>bash ops/start.sh setup</code> è£…ç¯å¢ƒ â†’ <code>bash ops/start.sh start</code> å¯åŠ¨<br>
    <b>åªè·‘ Direction Bï¼Ÿ</b> â†’ <code>bash ops/start.sh start --mode origin_only</code><br>
    <b>åªè·‘ä¸€ä¸ªç–¾ç—…è¯•è¯•ï¼Ÿ</b> â†’ <code>bash ops/start.sh run atherosclerosis</code><br>
    <b>åªè·‘ Cross (ARCHS4)?</b> â†’ <code>SIG_PRIORITY=archs4 bash ops/start.sh run myocarditis --mode cross_only</code><br>
    <b>æƒ³åŠ æ–°ç–¾ç—…ï¼Ÿ</b> â†’ åœ¨ disease list åŠ ä¸€è¡Œï¼ˆå¡«å¥½ disease_keyã€disease_queryã€EFO IDï¼‰â†’ <code>bash ops/start.sh start</code>ï¼ˆå…¨è‡ªåŠ¨ï¼šGEOâ†’dsmetaâ†’ARCHS4 fallbackï¼‰<br>
    <b>æƒ³ç²¾ç»†æ§åˆ¶ GSE é€‰æ‹©ï¼Ÿ</b> â†’ <code>auto_discover_geo.py</code> â†’ AI å®¡æ ¸ â†’ ç¼–è¾‘ YAML â†’ <code>generate_dsmeta_configs.py</code><br>
    <b>æŸæ­¥éª¤è¶…æ—¶ï¼Ÿ</b> â†’ è®¾ç½® <code>TIMEOUT_LLM_STEP6=14400</code> ç­‰æ¨¡å—çº§è¶…æ—¶å˜é‡<br>
    <b>è·‘å‡ºé—®é¢˜äº†ï¼Ÿ</b> â†’ <code>bash ops/check_status.sh --failures</code>ï¼ˆçœ‹å“ªä¸ªç–¾ç—…çš„å“ªä¸ªé˜¶æ®µå¤±è´¥ï¼‰
  </div>

  <h3>å½“å‰çŠ¶æ€é€ŸæŸ¥</h3>
  <table>
    <tr><th>ç–¾ç—…åˆ—è¡¨</th><th>å†…å®¹</th><th>å¯ç”¨æ¨¡å¼</th></tr>
    <tr><td><code>disease_list_day1_origin.txt</code></td><td>15 ä¸ªå¿ƒè¡€ç®¡ç–¾ç—… (æœ‰ EFO ID)</td><td>Direction B (origin_only)</td></tr>
    <tr><td><code>disease_list_day1_dual.txt</code></td><td>7 ä¸ªç–¾ç—… (atherosclerosis + 6 auto-discovered, AI å®¡æ ¸å â‰¥2 GSE)</td><td>Direction A + B (dual)</td></tr>
    <tr><td><code>disease_list.txt</code></td><td>æ¨¡æ¿/ç©º</td><td>è‡ªå®šä¹‰</td></tr>
    <tr><td><code>disease_list_ra_benchmark.txt</code></td><td>RA åŸºå‡†æµ‹è¯•</td><td>ç±»é£æ¹¿å…³èŠ‚ç‚éªŒè¯</td></tr>
  </table>

  <div class="highlight-green">
    <b>ğŸ†• æ–°å¢ç–¾ç—…ï¼ˆå…¨è‡ªåŠ¨æ¨¡å¼ï¼Œæ¨èï¼‰ï¼š</b><br>
    â‘  åœ¨ disease list åŠ ä¸€è¡Œï¼š<code>peripheral_artery_disease|peripheral artery disease|EFO_0004265|</code><br>
    â‘¡ <code>bash ops/start.sh start</code> â†’ runner è‡ªåŠ¨æ‰§è¡Œ ensure_cross_signature_config()ï¼š<br>
    &nbsp;&nbsp;&nbsp;&nbsp;â†’ æœ GEO â†’ ç”Ÿæˆ dsmeta config â†’ GEO å¤±è´¥åˆ™ç”Ÿæˆ ARCHS4 config â†’ éƒ½å¤±è´¥åˆ™ skip Cross ç»§ç»­ Origin<br>
    â‘¢ å®Œæ¯•ã€‚æ— éœ€æ‰‹åŠ¨åˆ›å»ºä»»ä½• config æ–‡ä»¶ã€‚
  </div>
  <div class="highlight-pink">
    <b>æ–°å¢ç–¾ç—…ï¼ˆç²¾ç»†æ§åˆ¶æ¨¡å¼ï¼Œå¯é€‰ï¼‰ï¼š</b><br>
    â‘  <code>auto_discover_geo.py --disease "xxx" --write-yaml</code> â†’ æœ GEO + è‡ªåŠ¨åˆ†ç±»<br>
    â‘¡ æŸ¥çœ‹ <code>geo_curation/xxx/route_recommendation.txt</code> â†’ ç¡®è®¤è·¯çº¿ï¼ˆ0 GSE = åªèµ° Bï¼Œâ‰¥2 GSE = å¯èµ° Aï¼‰<br>
    â‘¢ <b style="color:#d63384;">AI å®¡æ ¸</b>ï¼šæŠŠ <code>discovery_log.txt</code> å–‚ç»™ Claude/ChatGPT â†’ æ£€æŸ¥æ•°æ®ç±»å‹/ç–¾ç—…åŒ¹é…/ç»„ç»‡/regex/é‡å¤/è®¾è®¡<br>
    â‘£ ç¼–è¾‘ <code>configs/xxx.yaml</code> â†’ ä» gse_list å’Œ regex_rules ç§»é™¤ä¸åˆæ ¼ GSEï¼ˆå®¡æ ¸å &lt;2 GSE â†’ ç§»é™¤è¯¥ç–¾ç—…ï¼‰<br>
    â‘¤ <code>generate_dsmeta_configs.py --update-disease-list</code> â†’ ç”Ÿæˆ config + æ›´æ–°åˆ—è¡¨ï¼ˆä»… â‰¥2 GSEï¼‰<br>
    â‘¥ <code>bash ops/start.sh check --mode dual</code> â†’ éªŒè¯ç¯å¢ƒå’Œ config èƒ½è·‘é€š<br>
    â‘¦ é‡å¯ runner æˆ–ç­‰ä¸‹ä¸€è½®è‡ªåŠ¨ pick up
  </div>

  <div class="highlight">
    <b>GSE æ•°é‡ä¸è·¯çº¿å†³ç­–ï¼š</b><br>
    <b>0 GSE</b> â†’ âŒ è·³è¿‡ Direction Aï¼Œåªèµ° Direction Bï¼ˆCT.gov â†’ KG â†’ LLMï¼‰<br>
    <b>1 GSE</b> â†’ âš ï¸ Direction A ä½å¯ä¿¡åº¦ï¼ˆæ— è·¨å®éªŒéªŒè¯ï¼‰ï¼Œå»ºè®®æ‰‹åŠ¨è¡¥æœæˆ–åªèµ° B<br>
    <b>2-3 GSE</b> â†’ âœ… Direction A å¯ç”¨ï¼Œmeta-analysis æœ‰æ•ˆ<br>
    <b>3-5 GSE</b> â†’ âœ… Direction A ç†æƒ³ï¼Œæœ€ä½³æ€§ä»·æ¯”<br>
    <b>>5 GSE</b> â†’ âœ… å……è¶³ï¼Œå¯æ›´ä¸¥æ ¼ç­›é€‰
  </div>

</div>

<!-- ==================== å®Œæ•´æ•°æ®æµ ==================== -->
<div id="dataflow"></div>
<h2>8. å®Œæ•´æ•°æ®æµ &amp; å…³é”®æ–‡ä»¶</h2>
<div class="card">

  <h3>ç«¯åˆ°ç«¯æ•°æ®æµï¼ˆå®Œæ•´ç‰ˆï¼‰</h3>
<div class="flow" style="font-size:10px; line-height: 1.7;">    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     GEO æ•°æ®é›†           â”‚   â”‚   ARCHS4 H5 å…¨å¹³å°          â”‚
    â”‚  GSE28829, GSE43292 ...  â”‚   â”‚   human_gene_v2.4.h5        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                 â”‚
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â• æ¨¡å— 1a: dsmeta    â•â•â•â•â•â•â•â•â•â•â•ªâ•â• æ¨¡å— 1b: ARCHS4
                 â–¼                                 â–¼
      Step1-3: ä¸‹è½½â†’limma DEâ†’æ¢é’ˆâ†’åŸºå›    Step1-2: å…³é”®è¯æœç´¢â†’æ ·æœ¬æå–
                 â”‚                                 â”‚
                 â–¼                                 â–¼
      Step4-5: meta åˆ†æ+RRA æ’å        Step3-5: DESeq2â†’metaâ†’ç­¾å
                 â”‚                                 â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ SIG_PRIORITY é€‰æ‹©
                                â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  ç­¾åè´¨é‡é—¨æ§ (æ¨¡å— 1c)           â”‚
                 â”‚  totalâ‰¥30 &amp; min(up,down)â‰¥10     â”‚
                 â”‚  Tier0: è·³è¿‡ / Tier1: cap80      â”‚
                 â”‚  Tier2: cap200 (é»˜è®¤)             â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ sigreverse_input.json
                                â–¼
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• æ¨¡å— 2: SigReverse
                                 â–¼
                    Step1-4: LINCS L1000 æŸ¥è¯¢ + å…ƒæ•°æ®
                                 â”‚
                                 â–¼
                    Step5-8: WTCS æ‰“åˆ† â†’ èšåˆ â†’ ç½®æ¢æ£€éªŒ â†’ Tau
                                 â”‚
                                 â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  drug_reversal_rank.csv   â”‚
                   â”‚  (å€™é€‰è¯ç‰©åè½¬åˆ†æ•°æ’å)      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â• æ¨¡å— 3: kg_explain
                                 â–¼
                    Step1-5: è¯ç‰©â†’é¶ç‚¹æ˜ å°„
                    (CT.govæ¨¡å¼ or ç­¾åæ¨¡å¼)
                                 â”‚
                                 â–¼
                    Step6-10: é¶ç‚¹â†’é€šè·¯â†’ç–¾ç—… + FAERS + è¡¨å‹
                                 â”‚
                                 â–¼
                    V5 æ’å: 54,000+ è¯ç‰©-ç–¾ç—…å¯¹
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
                    â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ bridge_repurpose_cross   â”‚  â”‚ bridge_origin_reassess   â”‚
  â”‚ æ¯è¯å…¨å±€æœ€ä¼˜ç–¾ç—… (~50è¯)  â”‚  â”‚ ä»…ç›®æ ‡ç–¾ç—…è¡Œ (~83è¯)     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                              â”‚
        â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â• æ¨¡å— 4: LLM+RAG
               â”‚                              â”‚
               â–¼                              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Direction A        â”‚      â”‚   Direction B        â”‚
  â”‚   è·¨ç–¾ç—…è¿ç§»          â”‚      â”‚   åŸç–¾ç—…é‡è¯„ä¼°        â”‚
  â”‚                      â”‚      â”‚                      â”‚
  â”‚  Step6: PubMed+LLM  â”‚      â”‚  Step6: PubMed+LLM  â”‚
  â”‚  Step7: 5ç»´æ‰“åˆ†+é—¨æ§  â”‚      â”‚  Step7: 5ç»´æ‰“åˆ†+é—¨æ§  â”‚
  â”‚  Step8: å€™é€‰æ‰“åŒ…      â”‚      â”‚  Step8: å€™é€‰æ‰“åŒ…      â”‚
  â”‚  Step9: éªŒè¯æ–¹æ¡ˆ      â”‚      â”‚  Step9: éªŒè¯æ–¹æ¡ˆ      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â–¼                              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ è·¨ç–¾ç—…å€™é€‰æ¸…å•        â”‚      â”‚ åŸç–¾ç—…å€™é€‰æ¸…å•        â”‚
  â”‚ fusion_rank_report.xlsx  â”‚      â”‚ fusion_rank_report.xlsx  â”‚
  â”‚ validation_plan.csv  â”‚      â”‚ validation_plan.csv  â”‚
  â”‚ (~5 ä¸ª GO å€™é€‰)      â”‚      â”‚ (~10 ä¸ª GO å€™é€‰)     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
               ç ”ç©¶è€…ç»¼åˆå†³ç­–
            é€‰æ‹©æœ€ç»ˆéªŒè¯å€™é€‰è¯ç‰©</div>

  <h3>å…³é”®æ–‡ä»¶æ¸…å•</h3>
  <table>
    <tr><th>æ–‡ä»¶</th><th>äº§è‡ª</th><th>äº¤ç»™</th><th>å†…å®¹</th></tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">sigreverse_input.json</td>
      <td>dsmeta / ARCHS4</td><td>SigReverse</td>
      <td>N up + N down åŸºå› ç­¾å (dsmeta: 300+300, ARCHS4: è§†æ ·æœ¬é‡)</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">disease_signature_meta.json</td>
      <td>dsmeta / ARCHS4</td><td>kg_explain (signature mode)</td>
      <td>ç­¾åå…ƒæ•°æ® (åŸºå› åˆ—è¡¨+æƒé‡+æ¥æºä¿¡æ¯)</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">drug_reversal_rank.csv</td>
      <td>SigReverse</td><td>kg_explain (å¯é€‰èåˆ)</td>
      <td>è¯ç‰©åè½¬åˆ†æ•°æ’å</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">drug_disease_rank.csv</td>
      <td>kg_explain</td><td>å†…éƒ¨ä½¿ç”¨</td>
      <td>54K+ è¯ç‰©-ç–¾ç—…å¯¹çš„ç»¼åˆå¾—åˆ†</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;color:#e84393;">bridge_repurpose_cross.csv</td>
      <td>kg_explain</td><td>LLM+RAG Dir A</td>
      <td>~50 è¯ç‰©ï¼ˆå…¨å±€æœ€ä¼˜ç–¾ç—…ï¼‰+ é¶ç‚¹/ç»“æ„ä¿¡æ¯</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;color:#00b894;">bridge_origin_reassess.csv</td>
      <td>kg_explain</td><td>LLM+RAG Dir B</td>
      <td>~83 è¯ç‰©ï¼ˆç›®æ ‡ç–¾ç—…å¾—åˆ†ï¼‰+ é¶ç‚¹/ç»“æ„ä¿¡æ¯</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">step7_gating_decision.csv</td>
      <td>LLM+RAG</td><td>Step 8</td>
      <td>GO / MAYBE / NO-GO å†³ç­–</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">fusion_rank_report.xlsx</td>
      <td>LLM+RAG</td><td>æœ€ç»ˆäº¤ä»˜</td>
      <td>Excel æŠ¥å‘Š (æ€»è¡¨+è¯¦æƒ…+é¶ç‚¹ç»“æ„è¡¨)</td>
    </tr>
    <tr>
      <td style="font-family:monospace;font-size:11px;">validation_plan.csv</td>
      <td>LLM+RAG</td><td>æœ€ç»ˆäº¤ä»˜</td>
      <td>å®éªŒéªŒè¯æ–¹æ¡ˆ (P1/P2/P3)</td>
    </tr>
  </table>
</div>

<!-- ==================== ç»¼åˆæ‰“åˆ†æ¶æ„ ==================== -->
<div id="scoring"></div>
<h2 style="background: linear-gradient(135deg, #e17055, #fdcb6e);">9. ç»¼åˆæ‰“åˆ†æ¶æ„</h2>
<div class="card">
  <p class="section-intro">æœ€ç»ˆæ’åä¸æ˜¯å•ä¸€æ¨¡å—å†³å®šçš„ï¼Œè€Œæ˜¯ <b>3 ä¸ªæ¨¡å—çš„è¯„åˆ†ä¸²è¡Œä¼ é€’ + èåˆ</b>ã€‚æ¯ä¸ªæ¨¡å—ç‹¬ç«‹æ‰“åˆ†ï¼Œåˆ†æ•°æ²¿ç®¡çº¿å‘ä¸‹ä¼ é€’ï¼Œæœ€ç»ˆåœ¨ Step 8 çš„ rank_key æ±‡åˆã€‚</p>

  <h3>å®é™…æ‰“åˆ†æµç¨‹ï¼ˆrunner.sh æ ‡å‡†ç®¡çº¿ï¼‰</h3>
<div class="flow-light">
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  ç¬¬ 1 å±‚ï¼šæ¨¡å—ç‹¬ç«‹æ‰“åˆ†  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Cross è·¯çº¿                              Origin è·¯çº¿
  â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”€â”€â”€â”€â”€â”€â”€â”€â”€
  dsmeta / ARCHS4                        screen_drugs (CT.gov)
       â”‚                                       â”‚
       â–¼                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  SigReverse             â”‚                    â”‚
â”‚  WTCS ç­¾ååè½¬æ‰“åˆ†       â”‚                    â”‚
â”‚  æ›´è´Ÿ = æ›´å¼ºåè½¬ = æ›´å¥½  â”‚                    â”‚
â”‚  OUT: reversal_rank.csv â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
            â”‚                                  â”‚
            â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  kg_explain V5 æ’å                                      â”‚
â”‚                                                          â”‚
â”‚  base: DTPD è·¯å¾„ â†’ mechanism_score                       â”‚
â”‚        (pathway_score Ã— hub_penalty Ã— affinity_weight)   â”‚
â”‚        + diversity_bonus (å¤šè·¯å¾„/å¤šé¶ç‚¹)                   â”‚
â”‚                                                          â”‚
â”‚  final = mechanism_score                                 â”‚
â”‚        Ã— exp(-0.3 Ã— safety_penalty - 0.2 Ã— trial_penalty)â”‚
â”‚        Ã— (1 + 0.1 Ã— phenotype_boost)                    â”‚
â”‚                                                          â”‚
â”‚  å®‰å…¨ç½š: tanh(log1p(PRR)/5 Ã— confidence Ã— serious_wt)    â”‚
â”‚  è¯•éªŒç½š: 0.1 Ã— log1p(safety_stops) + 0.05 Ã— log1p(eff)  â”‚
â”‚  è¡¨å‹:   avg_pheno_score Ã— log1p(n_phenotype)            â”‚
â”‚                                                          â”‚
â”‚  ç»„åˆè¯: final_score /= æˆåˆ†æ•° (å½’ä¸€åŒ–ï¼Œé¿å…è†¨èƒ€)          â”‚
â”‚  Bootstrap CI 1000x é‡åŒ–ä¸ç¡®å®šæ€§                          â”‚
â”‚                                                          â”‚
â”‚  OUT: drug_disease_rank.csv (54K+ å¯¹)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                  â”‚
           â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bridge_repurpose_cross â”‚     â”‚ bridge_origin_reassess â”‚
â”‚ æ¯è¯å…¨å±€æœ€ä¼˜ç–¾ç—… (~50)  â”‚     â”‚ ä»…ç›®æ ‡ç–¾ç—…è¡Œ (~83)     â”‚
â”‚ å«: final_score,       â”‚     â”‚ å«: final_score,       â”‚
â”‚ é¶ç‚¹/PDB/AlphaFold     â”‚     â”‚ é¶ç‚¹/PDB/AlphaFold     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                               â”‚
â”â”â”â”â”â”â”â”â”â”â”â”â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ”â”â”â” A/B äº¤å‰éªŒè¯
            â”‚                               â”‚
            â”‚     compare_ab_routes.py       â”‚
            â”‚     (bridge å±‚çº§æ¯”è¾ƒ)           â”‚
            â”‚     sort = n_routes Ã— 2.0      â”‚
            â”‚         + max(score_a, score_b) â”‚
            â”‚     A+B éƒ½æœ‰ â†’ æœ€é«˜ç½®ä¿¡åº¦       â”‚
            â”‚     OUT: ab_comparison.csv      â”‚
            â”‚                               â”‚
â”â”â”â”â”â”â”â”â”â”â”â”â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ”â”â”â” ç¬¬ 2 å±‚ï¼šæ–‡çŒ®æ‰“åˆ† + èåˆ
            â”‚                               â”‚
            â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: PubMed RAG      â”‚  â”‚  Step 6: PubMed RAG      â”‚
â”‚  å¤šè·¯æ£€ç´¢ + è¯­ä¹‰é‡æ’      â”‚  â”‚  å¤šè·¯æ£€ç´¢ + è¯­ä¹‰é‡æ’      â”‚
â”‚  + LLM ç»“æ„åŒ–æå–         â”‚  â”‚  + LLM ç»“æ„åŒ–æå–         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: 5 ç»´æ‰“åˆ† (0-100) â”‚  â”‚  Step 7: 5 ç»´æ‰“åˆ† (0-100) â”‚
â”‚  è¯æ®å¼ºåº¦  0-30           â”‚  â”‚  è¯æ®å¼ºåº¦  0-30           â”‚
â”‚  æœºåˆ¶åˆç†æ€§ 0-20          â”‚  â”‚  æœºåˆ¶åˆç†æ€§ 0-20          â”‚
â”‚  å¯è½¬åŒ–æ€§  0-20           â”‚  â”‚  å¯è½¬åŒ–æ€§  0-20           â”‚
â”‚  å®‰å…¨æ€§    0-20           â”‚  â”‚  å®‰å…¨æ€§    0-20           â”‚
â”‚  å¯è¡Œæ€§    0-10           â”‚  â”‚  å¯è¡Œæ€§    0-10           â”‚
â”‚                          â”‚  â”‚                          â”‚
â”‚  é—¨æ§: â‰¥60â†’GO            â”‚  â”‚  é—¨æ§: â‰¥60â†’GO            â”‚
â”‚       40-60â†’MAYBE        â”‚  â”‚       40-60â†’MAYBE        â”‚
â”‚       &lt;40â†’NO-GO          â”‚  â”‚       &lt;40â†’NO-GO          â”‚
â”‚  ç¡¬é—¨æ§: benefit&lt;1       â”‚  â”‚  ç¡¬é—¨æ§: benefit&lt;1       â”‚
â”‚    / æ–‡çŒ®&lt;2 / å±å®³&gt;50%   â”‚  â”‚    / æ–‡çŒ®&lt;2 / å±å®³&gt;50%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 8: rank_key èåˆ   â”‚  â”‚  Step 8: rank_key èåˆ   â”‚
â”‚  â˜… çœŸæ­£çš„å¤šæºèåˆç‚¹       â”‚  â”‚  â˜… çœŸæ­£çš„å¤šæºèåˆç‚¹       â”‚
â”‚                          â”‚  â”‚                          â”‚
â”‚  rank_key =              â”‚  â”‚  rank_key =              â”‚
â”‚    min(30, log1p(pmid)   â”‚  â”‚    min(30, log1p(pmid)   â”‚
â”‚         Ã— 10)  æ–‡çŒ®é‡     â”‚  â”‚         Ã— 10)  æ–‡çŒ®é‡     â”‚
â”‚  + topic_match Ã— 5       â”‚  â”‚  + topic_match Ã— 5       â”‚
â”‚  + LLM_score Ã— 0.35      â”‚  â”‚  + LLM_score Ã— 0.35      â”‚
â”‚     â†‘ æ¥è‡ª Step7 5ç»´æ€»åˆ†  â”‚  â”‚     â†‘ æ¥è‡ª Step7 5ç»´æ€»åˆ†  â”‚
â”‚  + novelty Ã— 19.5        â”‚  â”‚  + novelty Ã— 15          â”‚
â”‚     (cross é¼“åŠ±æ¢ç´¢)      â”‚  â”‚                          â”‚
â”‚  - uncertainty Ã— 4       â”‚  â”‚  - uncertainty Ã— 4       â”‚
â”‚  - harm_count Ã— 0.5      â”‚  â”‚  - harm_count Ã— 0.5      â”‚
â”‚  - neg_trials Ã— 1        â”‚  â”‚  - neg_trials Ã— 1        â”‚
â”‚  - blacklist_hit Ã— 8     â”‚  â”‚  - blacklist_hit Ã— 8     â”‚
â”‚                          â”‚  â”‚                          â”‚
â”‚  GO ä¼˜å…ˆæ’åº              â”‚  â”‚  GO ä¼˜å…ˆæ’åº              â”‚
â”‚  + explore é€šé“ MAYBE     â”‚  â”‚  + explore é€šé“ MAYBE     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 9: éªŒè¯æ–¹æ¡ˆç”Ÿæˆ     â”‚  â”‚  Step 9: éªŒè¯æ–¹æ¡ˆç”Ÿæˆ     â”‚
â”‚  P1/P2/P3 ä¼˜å…ˆçº§          â”‚  â”‚  P1/P2/P3 ä¼˜å…ˆçº§          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â–¼                              â–¼
  fusion_rank_report.xlsx Ã—2 â†’ ç ”ç©¶è€…ç»¼åˆå†³ç­–</div>

  <h3>å„å±‚æ‰“åˆ†å…¬å¼é€ŸæŸ¥</h3>
  <table>
    <tr><th>å±‚çº§</th><th>æ¨¡å—</th><th>æ ¸å¿ƒå…¬å¼</th><th>åˆ†æ•°æ–¹å‘</th></tr>
    <tr>
      <td><b>L1a</b></td>
      <td style="color:#34c759;">SigReverse</td>
      <td><code>WTCS = (z_up + z_down) / 2</code> &times; confidence_weight<br>éƒ¨åˆ†ä¸€è‡´: &times;0.3 è¡°å‡ï¼›èšåˆ: weighted_median + cell_line diversity bonus</td>
      <td>æ›´è´Ÿ = æ›´å¥½</td>
    </tr>
    <tr>
      <td><b>L1b</b></td>
      <td style="color:#ff9500;">kg_explain V5</td>
      <td><code>final = mechanism &times; exp(-0.3&times;safety - 0.2&times;trial) &times; (1 + 0.1&times;pheno)</code><br>
      safety: <code>tanh(log1p(PRR)/5 &times; conf &times; serious_wt)</code><br>
      trial: <code>0.1&times;log1p(safe_stops) + 0.05&times;log1p(eff_stops)</code><br>
      pheno: <code>avg_pheno_score &times; log1p(n_pheno)</code></td>
      <td>æ›´é«˜ = æ›´å¥½</td>
    </tr>
    <tr>
      <td><b>Bridge</b></td>
      <td style="color:#636e72;">compare_ab</td>
      <td><code>sort_key = n_routes &times; 2.0 + max(score_a, score_b)</code><br>
      A+B åŒçº¿ &rarr; +4 åŠ æˆï¼ˆbridge å±‚çº§ï¼Œæ—©æœŸå‚è€ƒï¼‰</td>
      <td>æ›´é«˜ = æ›´å¥½</td>
    </tr>
    <tr>
      <td><b>L2a</b></td>
      <td style="color:#af52de;">LLM+RAG 5ç»´</td>
      <td>è¯æ®å¼ºåº¦(30) + æœºåˆ¶(20) + è½¬åŒ–(20) + å®‰å…¨(20) + å¯è¡Œ(10) = 0-100<br>
      ç¡¬é—¨æ§: benefit&lt;1 / æ–‡çŒ®&lt;2 / å±å®³&gt;50% â†’ NO-GO<br>
      è½¯é—¨æ§: &ge;60â†’GO / 40-60â†’MAYBE / &lt;40â†’NO-GO</td>
      <td>æ›´é«˜ = æ›´å¥½</td>
    </tr>
    <tr>
      <td><b>L2b â˜…</b></td>
      <td style="color:#e84393;">Step8 rank_key</td>
      <td><code>min(30, log1p(pmid)&times;10) + topic&times;5 + LLM_score&times;0.35 + novelty&times;15~19.5<br>- uncertainty&times;4 - harm&times;0.5 - neg_trials&times;1 - blacklist&times;8</code><br>
      GO ä¼˜å…ˆ + explore é€šé“ â†’ <b>â˜… å„æ¨¡å—åˆ†æ•°åœ¨è¿™é‡Œæ±‡åˆä¸ºæœ€ç»ˆæ’å</b></td>
      <td>æ›´é«˜ = æ›´å¥½</td>
    </tr>
  </table>

  <div class="highlight-green">
    <b>å¤‡ç”¨ï¼šFusionRanker (sigreverse/fusion.py)</b><br>
    ä»£ç å·²å®ç°ä½†<b>æ ‡å‡†ç®¡çº¿é»˜è®¤å…³é—­</b>ï¼ˆ<code>fusion.enabled: false</code>ï¼‰ã€‚<br>
    å…¬å¼: <code>fusion = 0.50&times;norm(sig) + 0.30&times;norm(kg) + 0.10&times;norm(safety) + synergy + DR + lit</code><br>
    å¯æ‰‹åŠ¨å¼€å¯: åœ¨ <code>sigreverse/configs/default.yaml</code> è®¾ <code>fusion.enabled: true</code> + é…ç½® kg_scores_pathã€‚<br>
    å¯ç”¨åä¼šåœ¨ SigReverse ç®¡çº¿å†…é¢å¤–è¾“å‡º <code>fusion_ranking.csv</code>ã€‚
  </div>

  <h3>å…³é”®è®¾è®¡å†³ç­–</h3>
  <div class="highlight">
    <b>ä¸ºä»€ä¹ˆæ˜¯ä¸²è¡Œä¼ é€’è€Œä¸æ˜¯ä¸€ä¸ªå¤§å…¬å¼ï¼Ÿ</b><br>
    &bull; å„æ¨¡å—<b>æ•°æ®æ¥æºå®Œå…¨ä¸åŒ</b>ï¼ˆLINCS è¡¨è¾¾è°± vs ChEMBL é¶ç‚¹ vs PubMed æ–‡çŒ®ï¼‰ï¼Œé‡çº²ä¸å¯æ¯”<br>
    &bull; SigReverse ç­›å‡ºå€™é€‰è¯ â†’ kg_explain è§£é‡Šæœºåˆ¶ + å®‰å…¨/è¯•éªŒ/è¡¨å‹è°ƒæ•´ â†’ bridge ä¼ é€’ç»™ LLM+RAG<br>
    &bull; LLM+RAG æä¾›<b>ç‹¬ç«‹çš„æ–‡çŒ®éªŒè¯</b>â€”â€”ç®—æ³•è¯´å¥½ä¸å¤Ÿï¼Œæ–‡çŒ®ä¹Ÿè¦æ”¯æŒ<br>
    &bull; <b>Step 8 rank_key æ˜¯çœŸæ­£çš„èåˆç‚¹</b>ï¼šæ–‡çŒ®é‡ + LLM 5ç»´æ€»åˆ† + novelty - å„é¡¹ç½šåˆ†<br>
    &bull; LLM_score æƒé‡è¢«åˆ»æ„å‹ä½åˆ° <b>&times;0.35</b>ï¼ˆåŸ &times;1.0 å¯¼è‡´ 65% æƒé‡ï¼Œåå‘"å¥½è®²æ•…äº‹"çš„è¯ï¼‰<br>
    &bull; A/B äº¤å‰éªŒè¯æ˜¯<b>é¢å¤–çš„ç‹¬ç«‹æ€§æ£€éªŒ</b>â€”â€”ä¸¤æ¡ç‹¬ç«‹è·¯çº¿éƒ½æ‰¾åˆ° = æœ€é«˜ç½®ä¿¡
  </div>
</div>

<!-- ==================== é€ŸæŸ¥è¡¨ ==================== -->
<div id="summary"></div>
<h2>10. é€ŸæŸ¥æ€»ç»“</h2>
<div class="card">

  <h3>å„æ¨¡å—ä¸€å¥è¯æ€»ç»“</h3>
  <table>
    <tr><th>æ¨¡å—</th><th>åšä»€ä¹ˆ</th><th>æ ¸å¿ƒäº§å‡º</th></tr>
    <tr><td style="color:#0071e3;font-weight:600;">dsmeta</td><td>å¤š GSE meta åˆ†æ â†’ ç–¾ç—…åŸºå› ç­¾å</td><td>300 up + 300 down åŸºå› </td></tr>
    <tr><td style="color:#0071e3;font-weight:600;">ARCHS4</td><td>H5 å…¨å¹³å°å…³é”®è¯æœç´¢ â†’ DESeq2 â†’ ç­¾å</td><td>N up + N down åŸºå›  (æŒ‰æ ·æœ¬è¦†ç›–)</td></tr>
    <tr><td style="color:#e84393;font-weight:600;">è´¨é‡é—¨æ§</td><td>min(up,down)&ge;10 &amp; total&ge;30 â†’ åˆ†å±‚ cap</td><td>Tier 0/1/2 å†³ç­– + è¯ç‰©ä¸Šé™</td></tr>
    <tr><td style="color:#34c759;font-weight:600;">SigReverse</td><td>ç­¾ååè½¬æŸ¥ LINCS â†’ å€™é€‰è¯ç‰©</td><td>åè½¬åˆ†æ•°æ’åè¡¨</td></tr>
    <tr><td style="color:#ff9500;font-weight:600;">kg_explain</td><td>Drugâ†’Targetâ†’Pathwayâ†’Disease è§£é‡Š</td><td>V5 æ’å + 2 ä¸ª bridge æ–‡ä»¶ (å«é¶ç‚¹/PDB/AlphaFold)</td></tr>
    <tr><td style="color:#af52de;font-weight:600;">LLM+RAG</td><td>PubMed æ–‡çŒ®è¯æ® + æ‰“åˆ†é—¨æ§</td><td>2 ä»½å€™é€‰æ¸…å• (å«é¶ç‚¹ç»“æ„è¡¨) + éªŒè¯æ–¹æ¡ˆ</td></tr>
  </table>

  <h3>å…³é”®å¤–éƒ¨ API</h3>
  <table>
    <tr><th>API</th><th>ç”¨é€”</th><th>æ¨¡å—</th></tr>
    <tr><td>NCBI GEO</td><td>åŸºå› è¡¨è¾¾æ•°æ®</td><td>dsmeta</td></tr>
    <tr><td>ARCHS4 H5</td><td>RNA-seq è¡¨è¾¾çŸ©é˜µ (æœ¬åœ° H5 æ–‡ä»¶)</td><td>archs4_signature</td></tr>
    <tr><td>NCBI E-utilities</td><td>GEO æ•°æ®é›†è‡ªåŠ¨å‘ç°</td><td>ops/auto_discover_geo</td></tr>
    <tr><td>LDP3 (LINCS)</td><td>è¯ç‰©åŸºå› è¡¨è¾¾ç­¾å</td><td>SigReverse</td></tr>
    <tr><td>ClinicalTrials.gov</td><td>ä¸´åºŠè¯•éªŒ</td><td>kg_explain, LLM+RAG</td></tr>
    <tr><td>ChEMBL</td><td>è¯ç‰©-é¶ç‚¹-æœºåˆ¶</td><td>kg_explain</td></tr>
    <tr><td>Reactome</td><td>ç”Ÿç‰©é€šè·¯</td><td>kg_explain</td></tr>
    <tr><td>OpenTargets</td><td>åŸºå› -ç–¾ç—…å…³è”</td><td>kg_explain</td></tr>
    <tr><td>RxNorm</td><td>è¯ç‰©åæ ‡å‡†åŒ–</td><td>kg_explain</td></tr>
    <tr><td>FAERS</td><td>ä¸è‰¯ååº” (è‡ªæ„¿æŠ¥å‘Š)</td><td>kg_explain</td></tr>
    <tr><td>SIDER</td><td>è¯ç‰©æ ‡ç­¾å‰¯ä½œç”¨ (ç»“æ„åŒ–æ ‡ç­¾æ•°æ®)</td><td>kg_explain</td></tr>
    <tr><td>Ensembl REST</td><td>Ensembl ID â†’ åŸºå› ç¬¦å·æ‰¹é‡è½¬æ¢</td><td>dsmeta</td></tr>
    <tr><td>PubMed (NCBI)</td><td>æ–‡çŒ®æ‘˜è¦</td><td>LLM+RAG</td></tr>
    <tr><td>Ollama (æœ¬åœ°)</td><td>LLM ç»“æ„åŒ–æå–</td><td>LLM+RAG</td></tr>
  </table>

  <h3>ä¸€å¥è¯ç†è§£æ•´ä¸ªé¡¹ç›®</h3>
  <div class="highlight">
    ä»å…¬å…±åŸºå› è¡¨è¾¾æ•°æ®æ„å»ºç–¾ç—…ç­¾åï¼ˆdsmeta GEO meta åˆ†æ æˆ– ARCHS4 H5 å…¨å¹³å°æœç´¢ï¼Œå«åˆ†å±‚è´¨é‡é—¨æ§ï¼‰â†’ ç”¨ LINCS åæŸ¥å€™é€‰è¯ç‰© â†’ ç”¨çŸ¥è¯†å›¾è°±è§£é‡Šæœºåˆ¶å¹¶åˆ†è£‚ä¸º"è·¨ç–¾ç—…æ¢ç´¢"å’Œ"åŸç–¾ç—…é‡è¯„ä¼°"ä¸¤æ¡è·¯çº¿ â†’ ç”¨ PubMed + LLM ä¸ºæ¯æ¡è·¯çº¿ç‹¬ç«‹ç”Ÿæˆæ–‡çŒ®è¯æ®å’ŒéªŒè¯æ–¹æ¡ˆ â†’ ç ”ç©¶è€…ç»¼åˆä¸¤ä»½æ¸…å•åšæœ€ç»ˆå†³ç­–ã€‚
  </div>

</div>

<div class="card-full" style="text-align:center; color:#86868b; font-size:12px; margin-top:24px;">
  Drug Repurposing Platform &middot; é¡¹ç›®å…¨è§ˆ v6<br>
  æ›´æ–°äº 2026-02-28 &middot; æ–°å¢ï¼šEnsembl ID è‡ªåŠ¨è½¬æ¢ + SIDER å®‰å…¨æ•°æ®æº + æ¨¡å—çº§è¶…æ—¶æ§åˆ¶ + merge_sig_to_bridge + 28 ç§ç–¾ç—…é…ç½® + ä¼˜é›…è·³è¿‡ç¼ºå¤± GSEA
</div>

</body>
</html>
